{"remainingRequest":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ohirashunpei/project/sakura-front/src/views/SendMessage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ohirashunpei/project/sakura-front/src/views/SendMessage.vue","mtime":1627283908060},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdAL2FwaS9pbmRleCcKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JwoKCmNvbnN0IHllYXJfc3RhcnQgPSAyMDIxCmNvbnN0IHllYXJfZW5kID0gMjEwMApjb25zdCBhZ2VSYW5nZSA9IG5ldyBBcnJheSh5ZWFyX2VuZCAtIHllYXJfc3RhcnQgKyAxKS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gaSArIHllYXJfc3RhcnQpCmNvbnN0IG1vbnRoX3N0YXJ0ID0gMQpjb25zdCBtb250aF9lbmQgPSAxMgpjb25zdCBtb250aFJhbmdlID0gbmV3IEFycmF5KG1vbnRoX2VuZCAtIG1vbnRoX3N0YXJ0ICsgMSkuZmlsbChudWxsKS5tYXAoKF8sIGkpID0+IGkgKyBtb250aF9zdGFydCkKY29uc3QgZGF5X3N0YXJ0ID0gMQpjb25zdCBkYXlfZW5kID0gMzEKY29uc3QgZGF5c1JhbmdlID0gbmV3IEFycmF5KGRheV9lbmQgLSBkYXlfc3RhcnQgKyAxKS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gaSArIGRheV9zdGFydCkKY29uc3QgaG91cnNSYW5nZSA9IFsuLi5BcnJheSgyNCldLm1hcCgoXywgaSkgPT4gaSkgCmNvbnN0IG1pbnV0ZXNSYW5nZSA9IFsuLi5BcnJheSg2MCkua2V5cygpXQoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ3RvX2lkJ10sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBoZWFkOiAn44Oh44OD44K744O844K46YCB5L+hJywKICAgICAgdmFsdWU6IG51bGwsCiAgICAgIGl0ZW1fbWludXRlczogWwogICAgICAgICcwJywKICAgICAgICAnMScsCiAgICAgICAgJzInLAogICAgICAgICczJywKICAgICAgICAnNCcsCiAgICAgICAgJzUnCiAgICAgIF0sCiAgICAgIHVzZXI6IFtdLAogICAgICBzZWxlY3Q6ICcnLAogICAgICB0bzogJycsCiAgICAgIGJvZHk6ICcnLAogICAgICB5ZWFyOiAnMjAyMScsCiAgICAgIHllYXJyYW5nZTogYWdlUmFuZ2UsCiAgICAgIG1vbnRoOiAnNicsCiAgICAgIG1vbnRocmFuZ2U6IG1vbnRoUmFuZ2UsCiAgICAgIGRheTogJzMnLAogICAgICBkYXlzcmFuZ2U6IGRheXNSYW5nZSwKICAgICAgaG91cjogJycsCiAgICAgIGhvdXJzcmFuZ2U6IGhvdXJzUmFuZ2UsCiAgICAgIG1pbnV0ZTogJycsCiAgICAgIG1pbnV0ZXNyYW5nZTogbWludXRlc1JhbmdlLAogICAgICB0aW1lOiBbXSwKICAgICAgdGl0bGU6IFtdLAogICAgICB1cGxvYWRlZEltYWdlOiAnJywKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ3VzZXJfaW5mbycsICJyYWlsc1VSTCIsICJtZXNzYWdlIl0sKSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBheGlvcygpCiAgICAgIC5nZXQoJy91c2Vycy8nICsgdGhpcy50b19pZCx7CiAgICAgICAgaGVhZGVyczogdGhpcy51c2VyX2luZm8KICAgICAgfSwKICAgICAgY29uc29sZS5sb2codGhpcy51c2VyX3Rva2VuKQogICAgICApCiAgICAgIC50aGVuKHJlc3BvbnNlID0+ICh0aGlzLnVzZXIgPSByZXNwb25zZS5kYXRhICwgY29uc29sZS5sb2cocmVzcG9uc2UpKSkKICB9LAogIG1ldGhvZHM6IHsKICAgICAgc2VuZE1lc3NhZ2UoKXsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGggLSAxLCB0aGlzLmRheSwgdGhpcy5ob3VyLCB0aGlzLm1pbnV0ZSkKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1hZ2UnLCB0aGlzLnVwbG9hZGVkSW1hZ2UpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2Zyb21faWQnLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndG9faWQnLCB0aGlzLnRvX2lkKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCd0aXRsZScsIHRoaXMudGl0bGUpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2JvZHknLCB0aGlzLmJvZHkpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3RpbWUnLCBkYXRlLmdldFRpbWUoKSAvIDEwMDApOwogICAgICBheGlvcygpLnBvc3QoJy91c2Vycy8nICsgdGhpcy51c2VyX2luZm9bJ2lkJ10gKyAnL21lc3NhZ2VzJywgZm9ybURhdGEsIHsKICAgICAgICBoZWFkZXJzOiB0aGlzLnVzZXJfaW5mbwogICAgICB9CiAgICAgICkKICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gKCAKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSksCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnU2VuZCd9KQogICAgICAgICkpCgogICAgfSwKICAgIG9uRmlsZUNoYW5nZShlKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGxldCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzOwogICAgICAgIHRoaXMudXBsb2FkZWRJbWFnZSA9IGZpbGVzWzBdOwogICAgICAgIGNvbnNvbGUubG9nKGZpbGVzKQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMudXBsb2FkZWRJbWFnZSkKICAgICB9LAogICAgIHJldHVyblBhZ2UoKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdTZW5kJ30pCiAgICAgIH0sCiAgICBzYXZlTWVzYWdlKCl7CiAgICAgIGNvbnN0IHRtcCA9IHsKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICBib2R5OiB0aGlzLmJvZHksCiAgICAgICAgeWVhcjogdGhpcy55ZWFyLAogICAgICAgIG1vbnRoOiB0aGlzLm1vbnRoLAogICAgICAgIGRheTogdGhpcy5kYXksCiAgICAgICAgaG91cjogdGhpcy5ob3VyLAogICAgICAgIG1pbnV0ZTogdGhpcy5taW51dGUsCiAgICAgICAgdG9faWQ6IHRoaXMudG9faWQsCiAgICAgICAgaW1hZ2U6IHRoaXMuaW1hZ2UKICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2F2ZU1lc3NhZ2UnLCB0bXApCiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["SendMessage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SendMessage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container>\n    <v-row class='mt-3 ml-3'>\n        <p class=\"text-h6\"> メッセージ </p>\n    </v-row>\n  <v-row class='mr-2 mt-0'>\n    <v-col cols='1'>\n      <v-btn icon @click='returnPage'>\n        <v-icon>\n          mdi-arrow-left-thick\n        </v-icon>\n      </v-btn>\n    </v-col>\n  </v-row>\n  <v-divider class='mt-3'/>\n  <v-card height='550' class='mt-3'>\n    <v-alert outlined color=\"yellow darken-3\" height=\"550\">\n      <v-row class='mt-0'>\n        <v-col cols=\"2\">\n          <v-avatar size='50'>\n            <img :src=\"railsURL + user.avatar_url\">\n          </v-avatar>\n        </v-col>\n        <v-col>\n          <v-text-field\n            outlined\n            v-model=\"title\"\n            label=\"件名\"\n          ></v-text-field>\n        </v-col>\n      </v-row>\n      <v-row>\n       <v-col>\n        <v-select\n          v-model=\"year\"\n          :items=\"yearrange\"\n          label=\"年\"\n          height=\"20\"\n          dense\n        />\n        </v-col>\n        <v-col>\n          <v-select\n            v-model=\"month\"\n            :items=\"monthrange\"\n            label=\"月\"\n            height=\"20\"\n            dense\n          ></v-select>\n        </v-col>\n        <v-col>\n          <v-select\n            v-model=\"day\"\n            :items=\"daysrange\"\n            label=\"日\"\n            height=\"20\"\n            dense\n          ></v-select>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col>\n          <v-select\n            v-model=\"hour\"\n            :items=\"hoursrange\"\n            label=\"時\"\n            height=\"20\"\n            dense\n          ></v-select>\n        </v-col>\n        <v-col>\n          <v-select\n            v-model=\"minute\"\n            :items=\"minutesrange\"\n            label=\"分\"\n            height=\"20\"\n            dense\n          ></v-select>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col>\n          <input name=\"uploadedImage\" type=\"file\" ref=\"file\" accept=\"image/png, image/jpeg\" @change=\"onFileChange\"><br />\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-container fluid>\n          <v-textarea\n            v-model='body'\n            counter\n            label=\"メッセージ\"\n            :value=\"value\"\n            outlined\n          ></v-textarea>\n        </v-container>\n      </v-row>\n      <v-row justify=\"end\" class='mt-0'>\n          <v-btn outlined text @click=\"saveMessage\"> 保存する </v-btn>\n          <v-btn outlined text v-on:click=\"sendMessage\">送信する</v-btn>\n      </v-row>\n    </v-alert>\n    </v-card>\n  </v-container>\n</template>\n\n\n<script>\nimport axios from '@/api/index'\nimport { mapState } from 'vuex'\n\n\nconst year_start = 2021\nconst year_end = 2100\nconst ageRange = new Array(year_end - year_start + 1).fill(null).map((_, i) => i + year_start)\nconst month_start = 1\nconst month_end = 12\nconst monthRange = new Array(month_end - month_start + 1).fill(null).map((_, i) => i + month_start)\nconst day_start = 1\nconst day_end = 31\nconst daysRange = new Array(day_end - day_start + 1).fill(null).map((_, i) => i + day_start)\nconst hoursRange = [...Array(24)].map((_, i) => i) \nconst minutesRange = [...Array(60).keys()]\n\nexport default {\n  props: ['to_id'],\n  data () {\n    return {\n      head: 'メッセージ送信',\n      value: null,\n      item_minutes: [\n        '0',\n        '1',\n        '2',\n        '3',\n        '4',\n        '5'\n      ],\n      user: [],\n      select: '',\n      to: '',\n      body: '',\n      year: '2021',\n      yearrange: ageRange,\n      month: '6',\n      monthrange: monthRange,\n      day: '3',\n      daysrange: daysRange,\n      hour: '',\n      hoursrange: hoursRange,\n      minute: '',\n      minutesrange: minutesRange,\n      time: [],\n      title: [],\n      uploadedImage: '',\n    }\n  },\n  computed: {\n    ...mapState(['user_info', \"railsURL\", \"message\"],),\n  },\n  mounted() {\n    axios()\n      .get('/users/' + this.to_id,{\n        headers: this.user_info\n      },\n      console.log(this.user_token)\n      )\n      .then(response => (this.user = response.data , console.log(response)))\n  },\n  methods: {\n      sendMessage(){\n      var date = new Date(this.year, this.month - 1, this.day, this.hour, this.minute)\n      let formData = new FormData();\n      formData.append('image', this.uploadedImage);\n      formData.append('from_id', localStorage.getItem('id'));\n      formData.append('to_id', this.to_id);\n      formData.append('title', this.title);\n      formData.append('body', this.body);\n      formData.append('time', date.getTime() / 1000);\n      axios().post('/users/' + this.user_info['id'] + '/messages', formData, {\n        headers: this.user_info\n      }\n      )\n      .then(response => ( \n            console.log(response.data),\n            this.$router.push({name: 'Send'})\n        ))\n\n    },\n    onFileChange(e) {\n        e.preventDefault();\n        let files = e.target.files;\n        this.uploadedImage = files[0];\n        console.log(files)\n        console.log(this.uploadedImage)\n     },\n     returnPage() {\n        this.$router.push({name: 'Send'})\n      },\n    saveMesage(){\n      const tmp = {\n        title: this.title,\n        body: this.body,\n        year: this.year,\n        month: this.month,\n        day: this.day,\n        hour: this.hour,\n        minute: this.minute,\n        to_id: this.to_id,\n        image: this.image\n      }\n      this.$store.dispatch('saveMessage', tmp)\n    }\n  },\n}\n</script>\n\n<style scoped>\n .v-select input{\n   font-size: 1.0pm;\n }\n</style>"]}]}