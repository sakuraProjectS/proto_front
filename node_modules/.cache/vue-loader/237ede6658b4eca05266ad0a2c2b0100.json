{"remainingRequest":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ohirashunpei/project/sakura-front/src/views/TimeLine.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ohirashunpei/project/sakura-front/src/views/TimeLine.vue","mtime":1627254321402},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCnZhciBqYXBhbmVzZVRpbWUgPSAnJwp2YXIgamFwYW5lc2VUaW1lMiA9ICcnCgppbXBvcnQgYXhpb3MgZnJvbSAnQC9hcGkvaW5kZXgnCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CgogIGV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgLy8gcmFpbHNVUkw6ICJodHRwOi8vbG9jYWxob3N0OjMwMDAiLAogICAgICAvLyByYWlsc1VSTDogJ2h0dHBzOi8vNTQuMTY4LjM1LjIxNCcsCiAgICAgIHVzZXJzOiBbXSwKICAgICAgYXZhdGFyX3VybHM6IFtdLAogICAgICB1c2Vyc19uYW1lOiBbXSwKICAgICAgbXlhdmF0YXI6ICcnLAogICAgICBzZW5kaW5nX21lc3NhZ2VzOiBbXSwKICAgICAgY29udGVudDogJycsCiAgICAgIHNvcnRlZE1lc3NhZ2VzOiBbXQogICAgfSksCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2hvd0ZyaWVuZCgpewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICJTZW5kIn0pCiAgICAgICAgfSwKICAgICAgICBzaG93UHJvZmlsZSgpewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICJQcm9maWxlIn0pCiAgICAgICAgfSwKICAgICAgICBzaG93Q29udGVudChtLCBpbmRleCl7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICdNZXNzYWdlQ29udGVudCcsCiAgICAgICAgICAgIHBhcmFtczoge21lc3NhZ2VfaWQ6IG0uaWQsIGF2YXRhcl91cmw6IHRoaXMuYXZhdGFyX3VybHNbaW5kZXhdLCBmcm9tX25hbWU6IHRoaXMudXNlcnNfbmFtZVtpbmRleF19CiAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZGVsZXRlTWVzc2FnZShtKXsKICAgICAgICAgIGF4aW9zKCkuCiAgICAgICAgICBkZWxldGUoJy9tZXNzYWdlcy8nICsgbS5pZCwKICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAnYWNjZXNzLXRva2VuJzogdGhpcy51c2VyX2luZm9bImFjY2Vzcy10b2tlbiJdLAogICAgICAgICAgICAgICAgdWlkOiB0aGlzLnVzZXJfaW5mb1sidWlkIl0sCiAgICAgICAgICAgICAgICBjbGllbnQ6IHRoaXMudXNlcl9pbmZvWyJjbGllbnQiXQogICAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpIAogICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oe3BhdGg6IHRoaXMuJHJvdXRlci5jdXJyZW50Um91dGUucGF0aCwgZm9yY2U6IHRydWV9KQogICAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb3V0KCkgewogICAgICAgICAgYXdhaXQgYXhpb3MoKS5kZWxldGUoIi9hdXRoL3NpZ25fb3V0IiwgewogICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMudXNlcl9pbmZvCiAgICAgICAgICAgIH0pCgogICAgICAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbl9zdGF0dXMpIHsKICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyTG9naW4nLCAKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiYWNjZXNzLXRva2VuIjogIiIsCiAgICAgICAgICAgICAgICAidWlkIjogIiIsCiAgICAgICAgICAgICAgICAiaWQiOiAiIiwKICAgICAgICAgICAgICAgICJjbGllbnQiOiAiIgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ0xvZ2luJ30pCiAgICB9CiAgICB9LAogICAgYXN5bmMgbW91bnRlZCgpIHsKICAgICAgYXdhaXQgYXhpb3MoKQogICAgICAgIC5nZXQoJy9wcm9maWxlLycgKyB0aGlzLnVzZXJfaW5mb1siaWQiXSwKICAgICAgICB7CiAgICAgICAgICBoZWFkZXJzOiB0aGlzLnVzZXJfaW5mbwogICAgICAgIH0sCiAgICAgICAgKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+ICgKICAgICAgICAgIHRoaXMubXlhdmF0YXIgPSByZXNwb25zZS5kYXRhLmF2YXRhcl91cmwKICAgICAgICApCiAgICAgICk7CiAgICAgIGF3YWl0IGF4aW9zKCkKICAgICAgICAuZ2V0KCcvdXNlcnMvJyArIHRoaXMudXNlcl9pbmZvWydpZCddICsgJy9tZXNzYWdlcycsewogICAgICAgICAgaGVhZGVyczogdGhpcy51c2VyX2luZm8KICAgICAgICB9LAogICAgICAgICkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiAoCiAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlcywKICAgICAgICAgIHRoaXMubWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+CiAgICAgICAgICAgICgKICAgICAgICAgICAgamFwYW5lc2VUaW1lID0gbmV3IERhdGUobWVzc2FnZS50aW1lICogMTAwMCksCiAgICAgICAgICAgIG1lc3NhZ2UudGltZSA9IGphcGFuZXNlVGltZS5nZXRGdWxsWWVhcigpCiAgICAgICAgICAgICsgJy8nICsgKCcwJyArIChqYXBhbmVzZVRpbWUuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikKICAgICAgICAgICAgKyAnLycgKyAoJzAnICsgamFwYW5lc2VUaW1lLmdldERhdGUoKSkuc2xpY2UoLTIpCiAgICAgICAgICAgICsgJyAnICsgKCcwJyArIGphcGFuZXNlVGltZS5nZXRIb3VycygpKS5zbGljZSgtMikKICAgICAgICAgICAgKyAnOicgKyAoJzAnICsgamFwYW5lc2VUaW1lLmdldE1pbnV0ZXMoKSkuc2xpY2UoLTIpLAogICAgICAgICAgICBqYXBhbmVzZVRpbWUyID0gbmV3IERhdGUobWVzc2FnZS5jcmVhdGVkX3RpbWUgKiAxMDAwKSwKICAgICAgICAgICAgbWVzc2FnZS5jcmVhdGVkX3RpbWUgPSBqYXBhbmVzZVRpbWUyLmdldEZ1bGxZZWFyKCkKICAgICAgICAgICAgICAgICsgJy8nICsgKCcwJyArIChqYXBhbmVzZVRpbWUyLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpCiAgICAgICAgICAgICAgICArICcvJyArICgnMCcgKyBqYXBhbmVzZVRpbWUyLmdldERhdGUoKSkuc2xpY2UoLTIpCiAgICAgICAgICAgICAgICArICcgJyArICgnMCcgKyBqYXBhbmVzZVRpbWUyLmdldEhvdXJzKCkpLnNsaWNlKC0yKQogICAgICAgICAgICAgICAgKyAnOicgKyAoJzAnICsgamFwYW5lc2VUaW1lMi5nZXRNaW51dGVzKCkpLnNsaWNlKC0yKQogICAgICAgICAgKSksCiAgICAgICAgICB0aGlzLnVzZXJzID0gcmVzcG9uc2UuZGF0YS51c2VycwogICAgICAgICkpOwogICAgICAgIHRoaXMudXNlcnMuZm9yRWFjaCh1c2VyID0+CiAgICAgICAgICBheGlvcygpCiAgICAgICAgICAgIC5nZXQoJ3VzZXJzLycgKyB1c2VyLmlkICx7CiAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy51c2VyX2luZm8KICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZT0+ICgKICAgICAgICAgICAgICB0aGlzLnVzZXJzX25hbWUucHVzaChyZXNwb25zZS5kYXRhLm5hbWUpLAogICAgICAgICAgICAgIHRoaXMuYXZhdGFyX3VybHMucHVzaChyZXNwb25zZS5kYXRhLmF2YXRhcl91cmwpCiAgICAgICAgICAgICkpICAgIAogICAgICAgICk7CiAgICAgIGF3YWl0IGF4aW9zKCkKICAgICAgICAuZ2V0KCcvc2VuZGluZy8nICx7CiAgICAgICAgICBoZWFkZXJzOiB0aGlzLnVzZXJfaW5mbwogICAgICAgIH0sCiAgICAgICAgKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+ICgKICAgICAgICAgIHRoaXMuc2VuZGluZ19tZXNzYWdlcyA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZXMsCiAgICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnNlbmRpbmdfbWVzc2FnZXMubGVuZ3RoCiAgICAgICAgKSkKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAuLi5tYXBTdGF0ZShbInVzZXJfaW5mbyIsICJyYWlsc1VSTCJdKSwKICAgICAgc29ydGVkbWVzc2FnZXMoKXsKICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzLnNsaWNlKCkuc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICByZXR1cm4gKGEudGltZSA+IGIudGltZSkgPyAtMSA6IChhLnRpbWUgPCBiLnRpbWUpID8gMSA6IDA7CiAgICAgICAgfSkKICAgIH0KICB9CiAgfQo="},{"version":3,"sources":["TimeLine.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TimeLine.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container>\n       <v-row class='mt-3 ml-3'>\n          <v-col cols='4'><p class=\"text-h6\"> ホーム </p></v-col>\n          <v-col cols='6'/>\n          <v-col cols='1'>\n            <v-btn icon @click=\"out\">\n              <v-icon> mdi-logout </v-icon>\n            </v-btn>\n          </v-col>\n        </v-row>\n       <v-row justify=\"end\">\n          <v-col cols='2'>\n            <v-btn icon>\n                <v-icon large>\n                    mdi-bell-outline\n                </v-icon>\n            </v-btn>\n          </v-col>\n          <v-col cols='2'>\n            <v-btn icon >\n                <v-icon large>\n                    mdi-pencil-outline\n                </v-icon>\n            </v-btn>\n          </v-col>\n          <v-col cols='2'>\n            <v-btn icon @click='showFriend'>\n                <v-icon large>\n                    mdi-account-multiple-outline\n                </v-icon>\n            </v-btn>\n          </v-col>\n          <v-col v-if=\"myavatar\" cols='2'>\n            <v-btn icon @click='showProfile'>\n                <v-avatar size='30'>\n                  <v-img\n                  v-bind:src=\"railsURL + myavatar\"\n                  >\n                  </v-img>\n                </v-avatar>\n            </v-btn>\n          </v-col>\n          <v-col v-else cols='2'>\n            <v-btn icon @click='showProfile'>\n                <v-avatar size='30'>\n                  <v-img\n                  src=\"@/assets/icon/kame.jpg\"\n                  >\n                  </v-img>\n                </v-avatar>\n            </v-btn>\n          </v-col>\n      </v-row>\n      <v-divider></v-divider>\n      <v-row justify=\"center\" class='mt-5 mb-3'> \n        <v-tab v-if='content > 0'>\n          <v-badge\n            color=\"pink\"\n            icon=\"mdi-heart\"\n          >\n          <v-badge\n            color='pink'\n            :content=\"content\"\n            bottom\n          >\n            <v-img\n              src='@/assets/icon/kame.jpg'\n              max-height=\"100\"\n              max-width=\"100\"\n            >\n            </v-img>\n          </v-badge>\n          </v-badge>\n        </v-tab>\n        <v-tab v-if='content === 0'>\n          <v-badge\n            color=\"pink\"\n            icon=\"mdi-heart\"\n          >\n            <v-img\n              src='@/assets/icon/kame.jpg'\n              max-height=\"100\"\n              max-width=\"100\"\n            >\n            </v-img>\n          </v-badge>\n        </v-tab>\n      </v-row>\n      <v-layout wrap>\n      <v-flex v-for=\"(message, index) in sortedmessages\" :key=\"message.time\" xs12 sm9 md6 class='mt-5'>\n        <!-- <v-alert outlined color=\"yellow darken-3\" height=\"100\" rounded=\"xl\" width=\"100%\"> -->\n          <v-row align=\"center\" justify=\"center\" class='ma-1 mt-15'>\n            <v-btn @click='showContent(message, index)' icon> \n            <v-card height='95' rounded=\"xl\" width=\"100%\">\n              <v-container>\n                <v-row>\n                  <v-col class='mt-3 ml-1' cols='2'>\n                      <v-img \n                      :src=\"railsURL + avatar_urls[index]\"\n                      style=\"object-fit: cover;\"\n                      max-height=\"40\"\n                      max-width=\"40\"\n                      > \n                       \n                      </v-img>\n                  </v-col>\n                  <v-col> <v-divider vertical/> </v-col>\n                  <v-col cols='9' class='ml-0'>\n                    <v-row class='text-h8'>\n                      {{users_name[index]}}\n                    </v-row>\n                    <v-row class='text-caption'>\n                      {{message.title}}\n                    </v-row>\n                    <v-row justify=\"center\" class='text-overline'> \n                      {{message.time}}←{{message.created_time}}\n                    </v-row>\n                  </v-col>\n                </v-row>\n              </v-container>\n            </v-card>\n            </v-btn>\n          </v-row>\n        <!-- </v-alert> -->\n      </v-flex>\n      </v-layout>\n    </v-container>\n</template>\n\n\n<script>\nvar japaneseTime = ''\nvar japaneseTime2 = ''\n\nimport axios from '@/api/index'\nimport { mapState } from \"vuex\";\n\n  export default {\n    data: () => ({\n      messages: [],\n      dialog: false,\n      // railsURL: \"http://localhost:3000\",\n      // railsURL: 'https://54.168.35.214',\n      users: [],\n      avatar_urls: [],\n      users_name: [],\n      myavatar: '',\n      sending_messages: [],\n      content: '',\n      sortedMessages: []\n    }),\n    methods: {\n        showFriend(){\n          this.$router.push({name: \"Send\"})\n        },\n        showProfile(){\n          this.$router.push({name: \"Profile\"})\n        },\n        showContent(m, index){\n          this.$router.push({\n            name: 'MessageContent',\n            params: {message_id: m.id, avatar_url: this.avatar_urls[index], from_name: this.users_name[index]}\n          })\n        },\n        deleteMessage(m){\n          axios().\n          delete('/messages/' + m.id,\n          {\n              headers: {\n                'access-token': this.user_info[\"access-token\"],\n                uid: this.user_info[\"uid\"],\n                client: this.user_info[\"client\"]\n              },\n          },\n          ).then(response => {\n            console.log(response) \n            this.$router.go({path: this.$router.currentRoute.path, force: true})\n          }).catch(e => {\n            console.log(e)\n          })\n        },\n        async out() {\n          await axios().delete(\"/auth/sign_out\", {\n              headers: this.user_info\n            })\n\n          if (!this.$store.state.login_status) {\n             this.$store.dispatch('userLogin', \n              {\n                \"access-token\": \"\",\n                \"uid\": \"\",\n                \"id\": \"\",\n                \"client\": \"\"\n              }\n              )\n          }\n          this.$router.push({name: 'Login'})\n    }\n    },\n    async mounted() {\n      await axios()\n        .get('/profile/' + this.user_info[\"id\"],\n        {\n          headers: this.user_info\n        },\n        )\n        .then(response => (\n          this.myavatar = response.data.avatar_url\n        )\n      );\n      await axios()\n        .get('/users/' + this.user_info['id'] + '/messages',{\n          headers: this.user_info\n        },\n        )\n        .then(response => (\n          this.messages = response.data.messages,\n          this.messages.forEach(message =>\n            (\n            japaneseTime = new Date(message.time * 1000),\n            message.time = japaneseTime.getFullYear()\n            + '/' + ('0' + (japaneseTime.getMonth() + 1)).slice(-2)\n            + '/' + ('0' + japaneseTime.getDate()).slice(-2)\n            + ' ' + ('0' + japaneseTime.getHours()).slice(-2)\n            + ':' + ('0' + japaneseTime.getMinutes()).slice(-2),\n            japaneseTime2 = new Date(message.created_time * 1000),\n            message.created_time = japaneseTime2.getFullYear()\n                + '/' + ('0' + (japaneseTime2.getMonth() + 1)).slice(-2)\n                + '/' + ('0' + japaneseTime2.getDate()).slice(-2)\n                + ' ' + ('0' + japaneseTime2.getHours()).slice(-2)\n                + ':' + ('0' + japaneseTime2.getMinutes()).slice(-2)\n          )),\n          this.users = response.data.users\n        ));\n        this.users.forEach(user =>\n          axios()\n            .get('users/' + user.id ,{\n              headers: this.user_info\n            }).then(response=> (\n              this.users_name.push(response.data.name),\n              this.avatar_urls.push(response.data.avatar_url)\n            ))    \n        );\n      await axios()\n        .get('/sending/' ,{\n          headers: this.user_info\n        },\n        )\n        .then(response => (\n          this.sending_messages = response.data.messages,\n          this.content = this.sending_messages.length\n        ))\n    },\n    computed: {\n      ...mapState([\"user_info\", \"railsURL\"]),\n      sortedmessages(){\n          return this.messages.slice().sort((a, b) => {\n            return (a.time > b.time) ? -1 : (a.time < b.time) ? 1 : 0;\n        })\n    }\n  }\n  }\n</script>\n"]}]}