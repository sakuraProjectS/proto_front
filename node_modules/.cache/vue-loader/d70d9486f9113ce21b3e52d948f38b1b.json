{"remainingRequest":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ohirashunpei/project/sakura-front/src/views/ShowRequest.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ohirashunpei/project/sakura-front/src/views/ShowRequest.vue","mtime":1627242787775},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdAL2FwaS9pbmRleCcKaW1wb3J0IHttYXBTdGF0ZX0gZnJvbSAndnVleCcKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvRnJpZW5kOiB7fSwKICAgICAgZnJvbUZyaWVuZDoge30sCiAgICAgIHN0YXR1czogJycsCiAgICAgIHVzZXJTZWFyY2hlZDoge30sCiAgICAgIG1haWw6ICcnLAogICAgICB0bXBfc3RhdHVzOiAnJywKICAgICAgZmxhc2hfbWVzc2FnZTogJycsCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGl0ZW1zOiBbJ+WutuaXj+S7peWklicsICfopqonLCAn5a2QJywgJ+ellueItuavjScsICflrasnLCAn5Y+U54i25Y+U5q+NJywgJ+eUpeWnqicsICfjgYTjgajjgZMnXSwKICAgICAgc2VsZWN0OiAnJywKICAgICAgZm9sbG93ZXJfcmVsYXRpb246IDAsCiAgICAgIGZvbGxvd2VkX3JlbGF0aW9uOiAwLAogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbInVzZXJfaW5mbyJdKSwKICB9LAoKICBtb3VudGVkKCkgewogICAgYXhpb3MoKQogICAgLmdldCgnL3VzZXJzLycgKyB0aGlzLnVzZXJfaW5mb1snaWQnXSArICcvZm9sbG93aW5ncycsCiAgICB7CiAgICAgIGhlYWRlcnM6IHRoaXMudXNlcl9pbmZvCiAgICB9LAogICAgKQogICAgLnRoZW4ocmVzcG9uc2UgPT4gKHRoaXMudG9GcmllbmQgPSByZXNwb25zZS5kYXRhKSksCiAgICAKICAgIGF4aW9zKCkKICAgIC5nZXQoJy91c2Vycy8nICsgdGhpcy51c2VyX2luZm9bJ2lkJ10gKyAnL2ZvbGxvd2VycycsCiAgICB7CiAgICAgIGhlYWRlcnM6IHRoaXMudXNlcl9pbmZvCiAgICB9LAogICAgKQogICAgLnRoZW4ocmVzcG9uc2UgPT4gKHRoaXMuZnJvbUZyaWVuZCA9IHJlc3BvbnNlLmRhdGEpKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGRlc3Ryb3lGcmllbmQoaWQpewogICAgICAgIGNvbnNvbGUubG9nKGlkKQogICAgICAgIGF4aW9zKCkuZGVsZXRlKCcvdXNlcnMvJyArIGlkICsnL3JlbGF0aW9uc2hpcHMnLCAgCiAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdhY2Nlc3MtdG9rZW4nOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzLXRva2VuJyksCiAgICAgICAgICAgICAgICB1aWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKSwKICAgICAgICAgICAgICAgIGNsaWVudDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NsaWVudCcpLAogICAgICAgICAgICB9LAogICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gKAogICAgICAgICAgICB0aGlzLnN0YXR1cyA9IHJlc3BvbnNlLmRhdGEuc3RhdHVzLCAKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpLAogICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oe3BhdGg6IHRoaXMuJHJvdXRlci5jdXJyZW50Um91dGUucGF0aCwgZm9yY2U6IHRydWV9KQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ1NlbmQnfSkKICAgICAgICApKQogICAgfSwKICAgIGFjY2VwdEZyaWVuZChpZCl7CiAgICAgICAgY29uc29sZS5sb2coaWQpCiAgICAgICAgYXhpb3MoKS5wdXQoJy91c2Vycy8nICsgaWQgKycvcmVsYXRpb25zaGlwcycsIHsKICAgICAgICAgIHN0YXR1czogJ3RydWUnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMudXNlcl9pbmZvCiAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiAoCiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gcmVzcG9uc2UuZGF0YS5zdGF0dXMsIAogICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oe3BhdGg6IHRoaXMuJHJvdXRlci5jdXJyZW50Um91dGUucGF0aCwgZm9yY2U6IHRydWV9KQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ1NlbmQnfSkKICAgICAgICApKQogICAgfSwKICAgIHNlYXJjaFVzZXIoKXsKICAgICAgICBheGlvcygpLmdldCgnL3VzZXJzLycgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSArJy9zZWFyY2gnLCB7CiAgICAgICAgICBwYXJhbXM6e2VtYWlsOiB0aGlzLm1haWx9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBoZWFkZXJzOiB0aGlzLnVzZXJfaW5mbwogICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gKAogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSksCiAgICAgICAgICAgIHRoaXMudXNlclNlYXJjaGVkID0gcmVzcG9uc2UuZGF0YSwgCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlclNlYXJjaGVkKQogICAgICAgICkpCiAgICB9LAogICAgYXN5bmMgZm9sbG93RnJpZW5kKCl7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlclNlYXJjaGVkLmlkKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdCkKICAgICAgc3dpdGNoICh0aGlzLnNlbGVjdCkgewogICAgICAgIGNhc2UgJ+WutuaXj+S7peWklic6CiAgICAgICAgICB0aGlzLmZvbGxvd2VkX3JlbGF0aW9uID0gMAogICAgICAgICAgdGhpcy5mb2xsb3dlcl9yZWxhdGlvbiA9IDAKICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAn6KaqJzoKICAgICAgICAgIHRoaXMuZm9sbG93ZWRfcmVsYXRpb24gPSAxCiAgICAgICAgICB0aGlzLmZvbGxvd2VyX3JlbGF0aW9uID0gMgogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICflrZAnOgogICAgICAgICAgdGhpcy5mb2xsb3dlZF9yZWxhdGlvbiA9IDIKICAgICAgICAgIHRoaXMuZm9sbG93ZXJfcmVsYXRpb24gPSAxCiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgJ+ellueItuavjSc6CiAgICAgICAgICB0aGlzLmZvbGxvd2VkX3JlbGF0aW9uID0gMwogICAgICAgICAgdGhpcy5mb2xsb3dlcl9yZWxhdGlvbiA9IDQKICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAn5a2rJzoKICAgICAgICAgIHRoaXMuZm9sbG93ZWRfcmVsYXRpb24gPSAzCiAgICAgICAgICB0aGlzLmZvbGxvd2VyX3JlbGF0aW9uID0gNAogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICflj5TniLblj5Tmr40nOgogICAgICAgICAgdGhpcy5mb2xsb3dlZF9yZWxhdGlvbiA9IDUKICAgICAgICAgIHRoaXMuZm9sbG93ZXJfcmVsYXRpb24gPSA2CiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgJ+eUpeWnqic6CiAgICAgICAgICB0aGlzLmZvbGxvd2VkX3JlbGF0aW9uID0gNQogICAgICAgICAgdGhpcy5mb2xsb3dlcl9yZWxhdGlvbiA9IDYKICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAn44GE44Go44GTJzoKICAgICAgICAgIHRoaXMuZm9sbG93ZWRfcmVsYXRpb24gPSA3CiAgICAgICAgICB0aGlzLmZvbGxvd2VyX3JlbGF0aW9uID0gNwogICAgICAgICAgYnJlYWsKICAgICAgfQogICAgCiAgICAgIGF3YWl0IGF4aW9zKCkucG9zdCgnL3VzZXJzLycgKyB0aGlzLnVzZXJTZWFyY2hlZC5pZCArJy9yZWxhdGlvbnNoaXBzJywgewogICAgICAgIHVzZXJfaWQ6IHRoaXMudXNlclNlYXJjaGVkLmlkLAogICAgICAgIGZvbGxvd2VyX3JlbGF0aW9uOiB0aGlzLmZvbGxvd2VyX3JlbGF0aW9uLAogICAgICAgIGZvbGxvd2VkX3JlbGF0aW9uOiB0aGlzLmZvbGxvd2VkX3JlbGF0aW9uCiAgICAgIH0sIAogICAgICB7CiAgICAgICAgaGVhZGVyczogdGhpcy51c2VyX2luZm8KICAgICAgfQogICAgICApCiAgICAgIC50aGVuKHJlc3BvbnNlID0+ICgKICAgICAgICB0aGlzLnRtcF9zdGF0dXMgPSByZXNwb25zZS5kYXRhLnN0YXR1cwogICAgICApKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRtcF9zdGF0dXMpCiAgICAgICAgaWYodGhpcy50bXBfc3RhdHVzID09IHRydWUpewogICAgICAgIGNvbnNvbGUubG9nKCdhYWEnKQogICAgICAgIHRoaXMuZmxhc2hfbWVzc2FnZSA9ICfjgZnjgafjgavnmbvpjLLjgZXjgozjgabjgYTjgb7jgZknCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnU2VuZCd9KQogICAgICB9CiAgICB9LAogICAgcmV0dXJuUGFnZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdTZW5kJ30pCiAgICB9CiAgfSwKICAKfQo="},{"version":3,"sources":["ShowRequest.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ShowRequest.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container>\n      <v-row class='mt-3 ml-3'>\n          <p class=\"text-h6\"> 大切な人を検索 </p>\n      </v-row>\n      <v-row>\n          <v-btn icon @click='returnPage'>\n              <v-icon>\n                  mdi-arrow-left-thick\n              </v-icon>\n          </v-btn>\n      </v-row>\n      <v-divider class='mt-4'/>\n      <v-card class='mt-8'>\n        <v-container>\n          <v-row class='ml-2 mt-2 mr-2'>\n            <v-text-field\n              outlined\n              v-model=\"mail\"\n              label='メールアドレス'\n            >\n            </v-text-field>\n          </v-row>\n          <v-row justify=\"end\" class='mr-1 mt-0 mb-2'>\n              <v-btn @click='searchUser'>\n                検索\n              </v-btn>\n          </v-row>\n          <div v-if='userSearched.id' class='mt-2'>\n            <v-row>\n              <v-col cols='9'>\n                {{userSearched.name}}\n              </v-col>\n              <v-col cols='3'>\n                <v-btn icon @click='dialog=true'>\n                  <v-icon> mdi-account-plus </v-icon>\n                </v-btn>   \n              </v-col>   \n            </v-row>\n            <!-- <v-row v-if=\"tmp_status===true\">\n              <v-card-text>\n              {{flash_message}}\n              </v-card-text>\n            </v-row> -->\n            <v-dialog\n              :retain-focus=\"false\"\n              v-model=\"dialog\"\n              persistent\n              max-width=\"600px\"\n              >\n              <v-card>\n                  <v-container>\n                    <v-card-title> フレンド申請</v-card-title>\n                    <v-select\n                      :items=\"items\"\n                      label=\"あなたとの関係\"\n                      v-model=\"select\"\n                    ></v-select>\n                    <v-row justify=\"end\" class='mt-3 mb-3 mr-2'>\n                      <v-btn icon @click='followFriend' large>\n                          <v-icon>\n                              mdi-account-plus\n                          </v-icon>\n                      </v-btn>\n                      <v-btn @click=\"dialog = false\" icon large>\n                        <v-icon>\n                            mdi-close\n                        </v-icon>\n                    </v-btn>\n                    </v-row>\n                </v-container>\n              </v-card>\n          </v-dialog>\n          </div>\n\n        </v-container>\n      </v-card>\n       <v-card class='mt-8'>\n         <v-card-title>\n           申請中\n         </v-card-title>\n        <v-list>\n          <v-list-item\n          v-for=\"(item, i) in toFriend\"\n          :key=i\n        >\n            <v-list-item-content>\n              <v-list-item-title>\n                {{item.name}}\n              </v-list-item-title>\n            </v-list-item-content>\n            <v-list-item-action>\n                <v-btn @click='destroyFriend(item.id)'>\n                    削除\n                </v-btn>\n            </v-list-item-action>\n          </v-list-item>\n        </v-list>\n      </v-card>\n\n      <v-card class='mt-8'>\n        <v-card-title>\n          保留中\n        </v-card-title>\n        <v-list>\n          <v-list-item\n          v-for=\"(item, i) in fromFriend\"\n          :key=i\n        >\n            <v-list-item-content>\n              <v-list-item-title>\n                {{item.name}}\n              </v-list-item-title>\n            </v-list-item-content>\n            <v-list-item-action>\n                <v-btn @click='acceptFriend(item.id)'>\n                    承諾\n                </v-btn>\n                <v-btn @click='destroyFriend(item.id)'>\n                    削除\n                </v-btn>\n            </v-list-item-action>\n          </v-list-item>\n        </v-list>\n      </v-card>\n\n    </v-container>\n</template>\n\n\n<script>\nimport axios from '@/api/index'\nimport {mapState} from 'vuex'\n\nexport default {\n  data () {\n    return {\n      toFriend: {},\n      fromFriend: {},\n      status: '',\n      userSearched: {},\n      mail: '',\n      tmp_status: '',\n      flash_message: '',\n      dialog: false,\n      items: ['家族以外', '親', '子', '祖父母', '孫', '叔父叔母', '甥姪', 'いとこ'],\n      select: '',\n      follower_relation: 0,\n      followed_relation: 0,\n    }\n  },\n\n  computed: {\n    ...mapState([\"user_info\"]),\n  },\n\n  mounted() {\n    axios()\n    .get('/users/' + this.user_info['id'] + '/followings',\n    {\n      headers: this.user_info\n    },\n    )\n    .then(response => (this.toFriend = response.data)),\n    \n    axios()\n    .get('/users/' + this.user_info['id'] + '/followers',\n    {\n      headers: this.user_info\n    },\n    )\n    .then(response => (this.fromFriend = response.data))\n  },\n\n  methods: {\n    destroyFriend(id){\n        console.log(id)\n        axios().delete('/users/' + id +'/relationships',  \n        {\n            headers: {\n            'access-token': localStorage.getItem('access-token'),\n                uid: localStorage.getItem('uid'),\n                client: localStorage.getItem('client'),\n            },\n        }\n        )\n        .then(response => (\n            this.status = response.data.status, \n            console.log(response),\n            // this.$router.go({path: this.$router.currentRoute.path, force: true})\n            this.$router.push({name: 'Send'})\n        ))\n    },\n    acceptFriend(id){\n        console.log(id)\n        axios().put('/users/' + id +'/relationships', {\n          status: 'true'\n        },\n        {\n            headers: this.user_info\n        }\n        )\n        .then(response => (\n            this.status = response.data.status, \n            // this.$router.go({path: this.$router.currentRoute.path, force: true})\n            this.$router.push({name: 'Send'})\n        ))\n    },\n    searchUser(){\n        axios().get('/users/' + localStorage.getItem('id') +'/search', {\n          params:{email: this.mail}\n        },\n        {\n          headers: this.user_info\n        }\n        )\n        .then(response => (\n            console.log(response),\n            this.userSearched = response.data, \n            console.log(this.userSearched)\n        ))\n    },\n    async followFriend(){\n      console.log(this.userSearched.id)\n      console.log(this.select)\n      switch (this.select) {\n        case '家族以外':\n          this.followed_relation = 0\n          this.follower_relation = 0\n          break\n        case '親':\n          this.followed_relation = 1\n          this.follower_relation = 2\n          break\n        case '子':\n          this.followed_relation = 2\n          this.follower_relation = 1\n          break\n        case '祖父母':\n          this.followed_relation = 3\n          this.follower_relation = 4\n          break\n        case '孫':\n          this.followed_relation = 3\n          this.follower_relation = 4\n          break\n        case '叔父叔母':\n          this.followed_relation = 5\n          this.follower_relation = 6\n          break\n        case '甥姪':\n          this.followed_relation = 5\n          this.follower_relation = 6\n          break\n        case 'いとこ':\n          this.followed_relation = 7\n          this.follower_relation = 7\n          break\n      }\n    \n      await axios().post('/users/' + this.userSearched.id +'/relationships', {\n        user_id: this.userSearched.id,\n        follower_relation: this.follower_relation,\n        followed_relation: this.followed_relation\n      }, \n      {\n        headers: this.user_info\n      }\n      )\n      .then(response => (\n        this.tmp_status = response.data.status\n      ));\n        console.log(this.tmp_status)\n        if(this.tmp_status == true){\n        console.log('aaa')\n        this.flash_message = 'すでに登録されています'\n      }else{\n        this.$router.push({name: 'Send'})\n      }\n    },\n    returnPage() {\n      this.$router.push({name: 'Send'})\n    }\n  },\n  \n}\n</script>"]}]}