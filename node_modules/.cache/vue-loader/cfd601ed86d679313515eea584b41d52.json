{"remainingRequest":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ohirashunpei/project/sakura-front/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ohirashunpei/project/sakura-front/src/views/Login.vue","mtime":1626282270085},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdAL2FwaS9pbmRleCcKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlyc3RuYW1lOiAiIiwKICAgICAgbGFzdG5hbWU6ICIiLAogICAgICBuYW1lOiAiIiwKICAgICAgZW1haWw6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIHRpdGxlOiAiIiwKICAgICAgY29udGVudDogIiIsCiAgICAgIHRhc2tzOiBbXSwKICAgICAgY29tbWVudDogIiIsCiAgICAgIHBvc3RzOiBbXSwKICAgICAgdXNlcjoge30sCiAgICAgIGF1dG86ICIiLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHNpZ25VcCgpIHsKICAgICAgdGhpcy5uYW1lID10aGlzLmxhc3RuYW1lICsgIiAiICt0aGlzLmZpcnN0bmFtZQogICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUpCiAgICAgIGF3YWl0IGF4aW9zKCkKICAgICAgICAucG9zdCgiL2F1dGgiLCB7CiAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgKICAgICAgICAgICAgImFjY2Vzcy10b2tlbiIsCiAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnNbImFjY2Vzcy10b2tlbiJdCiAgICAgICAgICApOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImNsaWVudCIsIHJlc3BvbnNlLmhlYWRlcnNbImNsaWVudCJdKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1aWQiLCByZXNwb25zZS5oZWFkZXJzWyJ1aWQiXSk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWQiLCByZXNwb25zZS5kYXRhLmRhdGFbImlkIl0pOwogICAgICAgICAgdGhpcy51c2VyID0gewogICAgICAgICAgICB1aWQ6IHJlc3BvbnNlLmhlYWRlcnNbInVpZCJdLAogICAgICAgICAgICAiYWNjZXNzLXRva2VuIjogcmVzcG9uc2UuaGVhZGVyc1siYWNjZXNzLXRva2VuIl0sCiAgICAgICAgICAgIGNsaWVudDogcmVzcG9uc2UuaGVhZGVyc1siY2xpZW50Il0sCiAgICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLmRhdGFbImlkIl0sCiAgICAgICAgICB9LAogICAgICAgIAogICAgICAgICAgY29uc29sZS5sb2codGhpcy51c2VyKSwKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyTG9naW4nLCB0aGlzLnVzZXIpCiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldE1lc3NhZ2UnLCB7CiAgICAgICAgICBzdGF0dXM6IGZhbHNlLAogICAgICAgIH0pCiAgICAgICAgfQogICAgICAgICk7CiAgICAgIHRoaXMuaWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKQogICAgICBjb25zb2xlLmxvZyh0aGlzLmlkKQogICAgICBhd2FpdCBheGlvcygpLnB1dCgnL3VzZXJzLycgKyB0aGlzLmlkLCB7CiAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsCiAgICAgICAgbmFtZTogdGhpcy5uYW1lCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgJ2FjY2Vzcy10b2tlbic6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3MtdG9rZW4nKSwKICAgICAgICAgICAgdWlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndWlkJyksCiAgICAgICAgICAgIGNsaWVudDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NsaWVudCcpLAogICAgICAgICAgfSwKICAgICAgfQogICAgICApCiAgICAgIGlmICh0aGlzLmVtYWlsID09IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1aWQiKSl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnVGltZUxpbmUnfSkKICAgICAgfQogICAgfSwKICAgIHNpZ25JbigpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5lbWFpbCk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGFzc3dvcmQpOwogICAgICBheGlvcygpCiAgICAgICAgLnBvc3QoIi9hdXRoL3NpZ25faW4iLCB7CiAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgKICAgICAgICAgICAgImFjY2Vzcy10b2tlbiIsCiAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnNbImFjY2Vzcy10b2tlbiJdCiAgICAgICAgICApOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImNsaWVudCIsIHJlc3BvbnNlLmhlYWRlcnNbImNsaWVudCJdKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1aWQiLCByZXNwb25zZS5oZWFkZXJzWyJ1aWQiXSk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWQiLCByZXNwb25zZS5kYXRhLmRhdGFbImlkIl0pOwogICAgICAgICAgdGhpcy51c2VyID0gewogICAgICAgICAgICB1aWQ6IHJlc3BvbnNlLmhlYWRlcnNbInVpZCJdLAogICAgICAgICAgICAiYWNjZXNzLXRva2VuIjogcmVzcG9uc2UuaGVhZGVyc1siYWNjZXNzLXRva2VuIl0sCiAgICAgICAgICAgIGNsaWVudDogcmVzcG9uc2UuaGVhZGVyc1siY2xpZW50Il0sCiAgICAgICAgICB9LAogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXJMb2dpbicsIHRoaXMudXNlcikKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0TWVzc2FnZScsIHsKICAgICAgICAgIHN0YXR1czogZmFsc2UsCiAgICAgICAgfSkKICAgICAgICAgIGlmICh0aGlzLmVtYWlsID09IHJlc3BvbnNlLmhlYWRlcnNbInVpZCJdKXsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdUaW1lTGluZSd9KQogICAgICAgICAgfQogICAgICAgIH0pOyAgICAKICAgIH0sCiAgICAKICB9LAp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container>\n        <v-row justify=\"center\" class=\"mt-5\">\n            <img src=\"../assets/img/sakura-logo.png\" width=\"180\" height=\"180\">\n        </v-row>\n        <v-layout wrap class='justify-center'>\n          <v-flex xs12 sm10 md8>\n            <v-row class=\"ml-3 mr-3 mt-7\">\n                <v-col>\n                    <v-text-field\n                        v-model=\"lastname\"\n                        label=\"姓\"\n                        outlined\n                        filled\n                        rounded\n                        background-color=\"grey lighten-5\"\n                    ></v-text-field>\n                </v-col>\n                <v-col>\n                    <v-text-field\n                        v-model=\"firstname\"\n                        label=\"名\"\n                        outlined\n                        filled\n                        rounded\n                        background-color=\"grey lighten-5\"\n                    ></v-text-field>\n                </v-col>\n            </v-row>\n            <v-row class=\"ml-3 mr-3 mt-n7\"> \n                <v-col>\n                    <v-text-field\n                        v-model=\"email\"\n                        label=\"メールアドレス\"\n                        outlined\n                        filled\n                        rounded\n                        background-color=\"grey lighten-5\"\n                    ></v-text-field>\n                </v-col>\n            </v-row>\n              <v-row class=\"ml-3 mr-3 mt-n7\"> \n                <v-col>\n                    <v-text-field\n                        v-model=\"password\"\n                        type=\"password\"\n                        label=\"パスワード\"\n                        outlined\n                        filled\n                        rounded\n                        background-color=\"grey lighten-5\"\n                    ></v-text-field>\n                </v-col>\n              </v-row>\n          </v-flex>\n        </v-layout>\n        <div class=\"text-center\">\n            <v-row class=\"mt-n5\" align=\"center\"> \n                <v-col>\n                    <v-btn\n                        depressed\n                        rounded\n                        color=\"blue lighten-3\"\n                        x-large\n                        @click=\"signIn\"\n                    >\n                        ログイン\n                    </v-btn>\n                </v-col>\n            </v-row>\n            <v-row class=\"mt-n1\" align=\"center\"> \n                <v-col>\n                    <v-btn\n                        depressed\n                        rounded\n                        color=\"grey lighten-2\"\n                        x-large\n                        @click=\"signUp\"\n                    >\n                        新規ユーザー登録\n                    </v-btn>\n                </v-col>\n            </v-row>\n            <v-row class='justify-center'>\n              <v-switch\n                v-model=\"auto\"\n                class=\"ma-1\"\n                label=\"次回から自動ログインする\"\n              ></v-switch>\n            </v-row>\n        </div>\n    </v-container>\n</template>\n\n<script>\nimport axios from '@/api/index'\n\nexport default {\n  data() {\n    return {\n      firstname: \"\",\n      lastname: \"\",\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      title: \"\",\n      content: \"\",\n      tasks: [],\n      comment: \"\",\n      posts: [],\n      user: {},\n      auto: \"\",\n    };\n  },\n  methods: {\n    async signUp() {\n      this.name =this.lastname + \" \" +this.firstname\n      console.log(this.name)\n      await axios()\n        .post(\"/auth\", {\n          email: this.email,\n          password: this.password,\n        })\n        .then((response) => {\n          localStorage.setItem(\n            \"access-token\",\n            response.headers[\"access-token\"]\n          );\n          localStorage.setItem(\"client\", response.headers[\"client\"]);\n          localStorage.setItem(\"uid\", response.headers[\"uid\"]);\n          localStorage.setItem(\"id\", response.data.data[\"id\"]);\n          this.user = {\n            uid: response.headers[\"uid\"],\n            \"access-token\": response.headers[\"access-token\"],\n            client: response.headers[\"client\"],\n            id: response.data.data[\"id\"],\n          },\n        \n          console.log(this.user),\n          this.$store.dispatch('userLogin', this.user)\n          this.$store.commit('setMessage', {\n          status: false,\n        })\n        }\n        );\n      this.id = localStorage.getItem('id')\n      console.log(this.id)\n      await axios().put('/users/' + this.id, {\n        email: this.email,\n        password: this.password,\n        name: this.name\n      },\n      {\n        headers: {\n           'access-token': localStorage.getItem('access-token'),\n            uid: localStorage.getItem('uid'),\n            client: localStorage.getItem('client'),\n          },\n      }\n      )\n      if (this.email == localStorage.getItem(\"uid\")){\n            this.$router.push({name: 'TimeLine'})\n      }\n    },\n    signIn() {\n      console.log(this.email);\n      console.log(this.password);\n      axios()\n        .post(\"/auth/sign_in\", {\n          email: this.email,\n          password: this.password,\n        })\n        .then((response) => {\n          localStorage.setItem(\n            \"access-token\",\n            response.headers[\"access-token\"]\n          );\n          localStorage.setItem(\"client\", response.headers[\"client\"]);\n          localStorage.setItem(\"uid\", response.headers[\"uid\"]);\n          localStorage.setItem(\"id\", response.data.data[\"id\"]);\n          this.user = {\n            uid: response.headers[\"uid\"],\n            \"access-token\": response.headers[\"access-token\"],\n            client: response.headers[\"client\"],\n          },\n          this.$store.dispatch('userLogin', this.user)\n          this.$store.commit('setMessage', {\n          status: false,\n        })\n          if (this.email == response.headers[\"uid\"]){\n            this.$router.push({name: 'TimeLine'})\n          }\n        });    \n    },\n    \n  },\n};\n</script>\n\n"]}]}