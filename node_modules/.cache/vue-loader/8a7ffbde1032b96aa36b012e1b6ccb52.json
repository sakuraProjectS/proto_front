{"remainingRequest":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ohirashunpei/project/sakura-front/src/views/TimeLine_BU.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ohirashunpei/project/sakura-front/src/views/TimeLine_BU.vue","mtime":1626157508815},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCnZhciBqYXBhbmVzZVRpbWUgPSAnJwp2YXIgamFwYW5lc2VUaW1lMiA9ICcnCgppbXBvcnQgYXhpb3MgZnJvbSAnQC9hcGkvaW5kZXgnCgogIGV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgcmFpbHNVUkw6ICJodHRwOi8vbG9jYWxob3N0OjMwMDAiLAogICAgICAvLyByYWlsc1VSTDogJ2h0dHBzOi8vMTMuMTE0LjQzLjIyNicsCiAgICAgIHVzZXJzOiBbXSwKICAgICAgYXZhdGFyX3VybHM6IFtdLAogICAgICB1c2Vyc19uYW1lOiBbXQogICAgfSksCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2F2ZUNvbW1lbnQoKXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2FhYWFhJykKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5tZXNzYWdlcykKICAgICAgICB9LAogICAgICAgIGxvb2tTZW5kaW5nKCl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAiU2VuZGluZyJ9KQogICAgICAgIH0sCiAgICAgICAgc2hvd0NvbnRlbnQobSwgaW5kZXgpewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnTWVzc2FnZUNvbnRlbnQnLAogICAgICAgICAgICBwYXJhbXM6IHttZXNzYWdlX2lkOiBtLmlkLCBhdmF0YXJfdXJsOiB0aGlzLmF2YXRhcl91cmxzW2luZGV4XSwgZnJvbV9uYW1lOiB0aGlzLnVzZXJzX25hbWVbaW5kZXhdfQogICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGRlbGV0ZU1lc3NhZ2UobSl7CiAgICAgICAgICBheGlvcygpLgogICAgICAgICAgZGVsZXRlKCcvbWVzc2FnZXMvJyArIG0uaWQsCiAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnYWNjZXNzLXRva2VuJzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzcy10b2tlbicpLAogICAgICAgICAgICAgICAgICB1aWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKSwKICAgICAgICAgICAgICAgICAgY2xpZW50OiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2xpZW50JyksCiAgICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICApLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkgCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbyh7cGF0aDogdGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZS5wYXRoLCBmb3JjZTogdHJ1ZX0pCiAgICAgICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICByZXR1cm5QYWdlKCkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnSG9tZSd9KQogICAgICB9CiAgICB9LAogICAgYXN5bmMgbW91bnRlZCgpIHsKICAgICAgYXdhaXQgYXhpb3MoKQogICAgICAgIC5nZXQoJy91c2Vycy8nICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykgKyAnL21lc3NhZ2VzJyx7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdhY2Nlc3MtdG9rZW4nOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzLXRva2VuJyksCiAgICAgICAgICAgICAgdWlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndWlkJyksCiAgICAgICAgICAgICAgY2xpZW50OiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2xpZW50JyksCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+ICgKICAgICAgICAgIHRoaXMubWVzc2FnZXMgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2VzLAogICAgICAgICAgdGhpcy5tZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4KICAgICAgICAgICAgKAogICAgICAgICAgICBqYXBhbmVzZVRpbWUgPSBuZXcgRGF0ZShtZXNzYWdlLnRpbWUgKiAxMDAwKSwKICAgICAgICAgICAgbWVzc2FnZS50aW1lID0gamFwYW5lc2VUaW1lLmdldEZ1bGxZZWFyKCkKICAgICAgICAgICAgKyAnLycgKyAoJzAnICsgKGphcGFuZXNlVGltZS5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKQogICAgICAgICAgICArICcvJyArICgnMCcgKyBqYXBhbmVzZVRpbWUuZ2V0RGF0ZSgpKS5zbGljZSgtMikKICAgICAgICAgICAgKyAnICcgKyAoJzAnICsgamFwYW5lc2VUaW1lLmdldEhvdXJzKCkpLnNsaWNlKC0yKQogICAgICAgICAgICArICc6JyArICgnMCcgKyBqYXBhbmVzZVRpbWUuZ2V0TWludXRlcygpKS5zbGljZSgtMiksCiAgICAgICAgICAgIGphcGFuZXNlVGltZTIgPSBuZXcgRGF0ZShtZXNzYWdlLmNyZWF0ZWRfdGltZSAqIDEwMDApLAogICAgICAgICAgICBtZXNzYWdlLmNyZWF0ZWRfdGltZSA9IGphcGFuZXNlVGltZTIuZ2V0RnVsbFllYXIoKQogICAgICAgICAgICAgICAgKyAnLycgKyAoJzAnICsgKGphcGFuZXNlVGltZTIuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikKICAgICAgICAgICAgICAgICsgJy8nICsgKCcwJyArIGphcGFuZXNlVGltZTIuZ2V0RGF0ZSgpKS5zbGljZSgtMikKICAgICAgICAgICAgICAgICsgJyAnICsgKCcwJyArIGphcGFuZXNlVGltZTIuZ2V0SG91cnMoKSkuc2xpY2UoLTIpCiAgICAgICAgICAgICAgICArICc6JyArICgnMCcgKyBqYXBhbmVzZVRpbWUyLmdldE1pbnV0ZXMoKSkuc2xpY2UoLTIpCiAgICAgICAgICApKSwKICAgICAgICAgIHRoaXMudXNlcnMgPSByZXNwb25zZS5kYXRhLnVzZXJzCiAgICAgICAgKSk7CiAgICAgICAgdGhpcy51c2Vycy5mb3JFYWNoKHVzZXIgPT4KICAgICAgICAgIGF4aW9zKCkKICAgICAgICAgICAgLmdldCgndXNlcnMvJyArIHVzZXIuaWQgLHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAnYWNjZXNzLXRva2VuJzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzcy10b2tlbicpLAogICAgICAgICAgICAgICAgICB1aWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKSwKICAgICAgICAgICAgICAgICAgY2xpZW50OiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2xpZW50JyksCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZT0+ICgKICAgICAgICAgICAgICB0aGlzLnVzZXJzX25hbWUucHVzaChyZXNwb25zZS5kYXRhLm5hbWUpLAogICAgICAgICAgICAgIHRoaXMuYXZhdGFyX3VybHMucHVzaChyZXNwb25zZS5kYXRhLmF2YXRhcl91cmwpCiAgICAgICAgICAgICkpICAgIAogICAgICAgICk7CiAgICB9CiAgfQo="},{"version":3,"sources":["TimeLine_BU.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TimeLine_BU.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container >\n      <v-row class='mt-3 ml-3'>\n        <p class=\"text-h6\"> タイムライン </p>\n    </v-row>\n      <v-row class='mr-2'>\n      <v-col cols='1'>\n        <v-btn icon @click='returnPage'>\n          <v-icon>\n            mdi-arrow-left-thick\n          </v-icon>\n        </v-btn>\n      </v-col>\n      </v-row>\n       <v-row justify=\"space-around\">\n        <v-card-text>\n          <div class=\"font-weight-bold\">\n            2021\n          </div>\n          <v-timeline\n            align-top\n            :dense=\"$vuetify.breakpoint.smAndDown\"\n          >\n            <v-timeline-item\n              v-for=\"(message, index) in messages\"\n              :key=\"message.time\"\n              :color=\"message.color\"\n              small\n            >\n              <v-card>\n                  <v-row>\n                    <v-col cols='2'>\n                        <v-avatar> \n                            <img\n                            :src=\"railsURL + avatar_urls[index]\"\n                            style=\"object-fit: cover;\"\n                            >\n                        </v-avatar> \n                    </v-col>\n                    <v-col cols='10'>\n                      <v-card-subtitle>\n                        {{message.time}} ← {{message.created_time}}\n                      </v-card-subtitle>\n                    </v-col>\n                  </v-row>\n                   <v-card-title class=\"justify-center\">\n                      {{message.title}}\n                  </v-card-title>\n                  <v-card-actions>\n                    <v-btn @click='showContent(message, index)'>\n                      開く\n                    </v-btn>\n                    <v-btn @click='deleteMessage(message)'>\n                      削除\n                    </v-btn>\n                  </v-card-actions>\n                </v-card>\n            </v-timeline-item>\n          </v-timeline>\n        </v-card-text>\n      \n    </v-row>\n    <v-btn\n        icon\n        @click=\"lookSending\"\n    >\n        <v-icon> mdi-star</v-icon>\n    </v-btn>\n    </v-container>\n</template>\n\n\n<script>\nvar japaneseTime = ''\nvar japaneseTime2 = ''\n\nimport axios from '@/api/index'\n\n  export default {\n    data: () => ({\n      messages: [],\n      dialog: false,\n      railsURL: \"http://localhost:3000\",\n      // railsURL: 'https://13.114.43.226',\n      users: [],\n      avatar_urls: [],\n      users_name: []\n    }),\n    methods: {\n        saveComment(){\n            console.log('aaaaa')\n            console.log(this.messages)\n        },\n        lookSending(){\n            this.$router.push({name: \"Sending\"})\n        },\n        showContent(m, index){\n          this.$router.push({\n            name: 'MessageContent',\n            params: {message_id: m.id, avatar_url: this.avatar_urls[index], from_name: this.users_name[index]}\n          })\n        },\n        deleteMessage(m){\n          axios().\n          delete('/messages/' + m.id,\n          {\n              headers: {\n                  'access-token': localStorage.getItem('access-token'),\n                  uid: localStorage.getItem('uid'),\n                  client: localStorage.getItem('client'),\n              },\n          },\n          ).then(response => {\n            console.log(response) \n            this.$router.go({path: this.$router.currentRoute.path, force: true})\n          }).catch(e => {\n            console.log(e)\n          })\n        },\n        returnPage() {\n        this.$router.push({name: 'Home'})\n      }\n    },\n    async mounted() {\n      await axios()\n        .get('/users/' + localStorage.getItem('id') + '/messages',{\n          headers: {\n            'access-token': localStorage.getItem('access-token'),\n              uid: localStorage.getItem('uid'),\n              client: localStorage.getItem('client'),\n          },\n        },\n        )\n        .then(response => (\n          this.messages = response.data.messages,\n          this.messages.forEach(message =>\n            (\n            japaneseTime = new Date(message.time * 1000),\n            message.time = japaneseTime.getFullYear()\n            + '/' + ('0' + (japaneseTime.getMonth() + 1)).slice(-2)\n            + '/' + ('0' + japaneseTime.getDate()).slice(-2)\n            + ' ' + ('0' + japaneseTime.getHours()).slice(-2)\n            + ':' + ('0' + japaneseTime.getMinutes()).slice(-2),\n            japaneseTime2 = new Date(message.created_time * 1000),\n            message.created_time = japaneseTime2.getFullYear()\n                + '/' + ('0' + (japaneseTime2.getMonth() + 1)).slice(-2)\n                + '/' + ('0' + japaneseTime2.getDate()).slice(-2)\n                + ' ' + ('0' + japaneseTime2.getHours()).slice(-2)\n                + ':' + ('0' + japaneseTime2.getMinutes()).slice(-2)\n          )),\n          this.users = response.data.users\n        ));\n        this.users.forEach(user =>\n          axios()\n            .get('users/' + user.id ,{\n              headers: {\n                'access-token': localStorage.getItem('access-token'),\n                  uid: localStorage.getItem('uid'),\n                  client: localStorage.getItem('client'),\n              },\n            }).then(response=> (\n              this.users_name.push(response.data.name),\n              this.avatar_urls.push(response.data.avatar_url)\n            ))    \n        );\n    }\n  }\n</script>\n"]}]}