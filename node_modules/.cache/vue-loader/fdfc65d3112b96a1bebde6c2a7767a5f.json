{"remainingRequest":"/Users/ohirashunpei/project/proto_front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ohirashunpei/project/proto_front/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ohirashunpei/project/proto_front/src/views/Login.vue","mtime":1625373435269},{"path":"/Users/ohirashunpei/project/proto_front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/proto_front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/proto_front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ohirashunpei/project/proto_front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/proto_front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdAL2FwaS9pbmRleCcKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlyc3RuYW1lOiAiIiwKICAgICAgbGFzdG5hbWU6ICIiLAogICAgICBuYW1lOiAiIiwKICAgICAgZW1haWw6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIHRpdGxlOiAiIiwKICAgICAgY29udGVudDogIiIsCiAgICAgIHRhc2tzOiBbXSwKICAgICAgY29tbWVudDogIiIsCiAgICAgIHBvc3RzOiBbXSwKICAgICAgdXNlcjoge30sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgc2lnblVwKCkgewogICAgICB0aGlzLm5hbWUgPXRoaXMubGFzdG5hbWUgKyAiICIgK3RoaXMuZmlyc3RuYW1lCiAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSkKICAgICAgYXdhaXQgYXhpb3MoKQogICAgICAgIC5wb3N0KCIvYXV0aCIsIHsKICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKAogICAgICAgICAgICAiYWNjZXNzLXRva2VuIiwKICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVyc1siYWNjZXNzLXRva2VuIl0KICAgICAgICAgICk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiY2xpZW50IiwgcmVzcG9uc2UuaGVhZGVyc1siY2xpZW50Il0pOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVpZCIsIHJlc3BvbnNlLmhlYWRlcnNbInVpZCJdKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZCIsIHJlc3BvbnNlLmRhdGEuZGF0YVsiaWQiXSk7CiAgICAgICAgICB0aGlzLnVzZXIgPSB7CiAgICAgICAgICAgIHVpZDogcmVzcG9uc2UuaGVhZGVyc1sidWlkIl0sCiAgICAgICAgICAgICJhY2Nlc3MtdG9rZW4iOiByZXNwb25zZS5oZWFkZXJzWyJhY2Nlc3MtdG9rZW4iXSwKICAgICAgICAgICAgY2xpZW50OiByZXNwb25zZS5oZWFkZXJzWyJjbGllbnQiXSwKICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEuZGF0YVsiaWQiXSwKICAgICAgICAgIH0sCiAgICAgICAgCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXIpLAogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXJMb2dpbicsIHRoaXMudXNlcikKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0TWVzc2FnZScsIHsKICAgICAgICAgIHN0YXR1czogZmFsc2UsCiAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgKTsKICAgICAgdGhpcy5pZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuaWQpCiAgICAgIGF3YWl0IGF4aW9zKCkucHV0KCcvdXNlcnMvJyArIHRoaXMuaWQsIHsKICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICBuYW1lOiB0aGlzLm5hbWUKICAgICAgfSwKICAgICAgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAnYWNjZXNzLXRva2VuJzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzcy10b2tlbicpLAogICAgICAgICAgICB1aWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKSwKICAgICAgICAgICAgY2xpZW50OiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2xpZW50JyksCiAgICAgICAgICB9LAogICAgICB9CiAgICAgICkKICAgICAgaWYgKHRoaXMuZW1haWwgPT0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVpZCIpKXsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdIb21lJ30pCiAgICAgIH0KICAgIH0sCiAgICBzaWduSW4oKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZW1haWwpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnBhc3N3b3JkKTsKICAgICAgYXhpb3MoKQogICAgICAgIC5wb3N0KCIvYXV0aC9zaWduX2luIiwgewogICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oCiAgICAgICAgICAgICJhY2Nlc3MtdG9rZW4iLAogICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzWyJhY2Nlc3MtdG9rZW4iXQogICAgICAgICAgKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJjbGllbnQiLCByZXNwb25zZS5oZWFkZXJzWyJjbGllbnQiXSk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidWlkIiwgcmVzcG9uc2UuaGVhZGVyc1sidWlkIl0pOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkIiwgcmVzcG9uc2UuZGF0YS5kYXRhWyJpZCJdKTsKICAgICAgICAgIHRoaXMudXNlciA9IHsKICAgICAgICAgICAgdWlkOiByZXNwb25zZS5oZWFkZXJzWyJ1aWQiXSwKICAgICAgICAgICAgImFjY2Vzcy10b2tlbiI6IHJlc3BvbnNlLmhlYWRlcnNbImFjY2Vzcy10b2tlbiJdLAogICAgICAgICAgICBjbGllbnQ6IHJlc3BvbnNlLmhlYWRlcnNbImNsaWVudCJdLAogICAgICAgICAgfSwKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyTG9naW4nLCB0aGlzLnVzZXIpCiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldE1lc3NhZ2UnLCB7CiAgICAgICAgICBzdGF0dXM6IGZhbHNlLAogICAgICAgIH0pCiAgICAgICAgICBpZiAodGhpcy5lbWFpbCA9PSByZXNwb25zZS5oZWFkZXJzWyJ1aWQiXSl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnSG9tZSd9KQogICAgICAgICAgfQogICAgICAgIH0pOyAgICAKICAgIH0sCiAgICAKICB9LAp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container fill-height class=\"login mt-5\">\n      <v-row justify=\"center\">\n          <img src=\"../assets/img/sakura-card.png\" width=\"180\" height=\"180\">\n      </v-row>\n\n      <v-container class=\"cont\">\n        <v-form recontainerf=\"checkForm\">\n          <v-row>\n            <v-icon>\n              mdi-account\n            </v-icon>\n            <v-col>\n              <v-text-field\n              v-model=\"lastname\"\n              label=\"姓\"\n              outlined\n              filled\n              ></v-text-field>\n            </v-col>\n            <v-col>\n              <v-text-field\n              v-model=\"firstname\"\n              label=\"名\"\n              outlined\n              filled\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-icon>\n              mdi-email\n            </v-icon>\n            <v-col>\n              <v-text-field\n              v-model=\"email\"\n              label=\"メールアドレス\"\n              outlined\n              filled\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>    \n            <v-icon>\n              mdi-key\n            </v-icon>\n            <v-col>\n              <v-text-field\n              v-model=\"password\"\n              type=\"password\"\n              label=\"パスワード\"\n              outlined\n              filled\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row class='mb-2'> \n            <v-col>\n              <v-btn class=\"mr-6\" @click=\"signUp\">新規登録</v-btn>\n              <v-btn class=\"ml-6\" @click=\"signIn\">ログイン</v-btn>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-container>\n    </v-container>\n</template>\n\n\n<script>\nimport axios from '@/api/index'\n\nexport default {\n  data() {\n    return {\n      firstname: \"\",\n      lastname: \"\",\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      title: \"\",\n      content: \"\",\n      tasks: [],\n      comment: \"\",\n      posts: [],\n      user: {},\n    };\n  },\n  methods: {\n    async signUp() {\n      this.name =this.lastname + \" \" +this.firstname\n      console.log(this.name)\n      await axios()\n        .post(\"/auth\", {\n          email: this.email,\n          password: this.password,\n        })\n        .then((response) => {\n          localStorage.setItem(\n            \"access-token\",\n            response.headers[\"access-token\"]\n          );\n          localStorage.setItem(\"client\", response.headers[\"client\"]);\n          localStorage.setItem(\"uid\", response.headers[\"uid\"]);\n          localStorage.setItem(\"id\", response.data.data[\"id\"]);\n          this.user = {\n            uid: response.headers[\"uid\"],\n            \"access-token\": response.headers[\"access-token\"],\n            client: response.headers[\"client\"],\n            id: response.data.data[\"id\"],\n          },\n        \n          console.log(this.user),\n          this.$store.dispatch('userLogin', this.user)\n          this.$store.commit('setMessage', {\n          status: false,\n        })\n        }\n        );\n      this.id = localStorage.getItem('id')\n      console.log(this.id)\n      await axios().put('/users/' + this.id, {\n        email: this.email,\n        password: this.password,\n        name: this.name\n      },\n      {\n        headers: {\n           'access-token': localStorage.getItem('access-token'),\n            uid: localStorage.getItem('uid'),\n            client: localStorage.getItem('client'),\n          },\n      }\n      )\n      if (this.email == localStorage.getItem(\"uid\")){\n            this.$router.push({name: 'Home'})\n      }\n    },\n    signIn() {\n      console.log(this.email);\n      console.log(this.password);\n      axios()\n        .post(\"/auth/sign_in\", {\n          email: this.email,\n          password: this.password,\n        })\n        .then((response) => {\n          localStorage.setItem(\n            \"access-token\",\n            response.headers[\"access-token\"]\n          );\n          localStorage.setItem(\"client\", response.headers[\"client\"]);\n          localStorage.setItem(\"uid\", response.headers[\"uid\"]);\n          localStorage.setItem(\"id\", response.data.data[\"id\"]);\n          this.user = {\n            uid: response.headers[\"uid\"],\n            \"access-token\": response.headers[\"access-token\"],\n            client: response.headers[\"client\"],\n          },\n          this.$store.dispatch('userLogin', this.user)\n          this.$store.commit('setMessage', {\n          status: false,\n        })\n          if (this.email == response.headers[\"uid\"]){\n            this.$router.push({name: 'Home'})\n          }\n        });    \n    },\n    \n  },\n};\n</script>\n\n<style  lang=\"scss\" scoped>\n.login {\n  background-image: url(\"~@/assets/back/login.png\");\n  background-size: 95% 95%;\n  font-family: \"Arial Rounded MT Bold\", \"Helvetica Rounded\", Arial, sans-serif;\n  text-transform: uppercase;\n  // display: block;\n  // font-size: 92px;\n  // color: #f1ebe5;\n  // text-shadow: 0 8px 9px #c4b59d, 0px -2px 1px #fff;\n  // font-weight: bold;\n  // letter-spacing: -4px;\n  // text-align: center;\n  // position: absolute;\n  // padding: 300px 300px;\n  // top: 15%;\n  // left: 50%;\n  // transform: translate(-50%,-50%);\n  // border-radius: 20px;\n}\n\n  .cont {\n  // background-image: url(\"~@/assets/back/login.png\");\n  width: 60%;\n  }\n</style>\n"]}]}