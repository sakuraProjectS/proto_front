{"remainingRequest":"/Users/ohirashunpei/project/sakura-front/node_modules/babel-loader/lib/index.js!/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ohirashunpei/project/sakura-front/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ohirashunpei/project/sakura-front/src/views/Login.vue","mtime":1627251389701},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ohirashunpei/project/sakura-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9vaGlyYXNodW5wZWkvcHJvamVjdC9zYWt1cmEtZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAnQC9hcGkvaW5kZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpcnN0bmFtZTogIiIsCiAgICAgIGxhc3RuYW1lOiAiIiwKICAgICAgbmFtZTogIiIsCiAgICAgIGVtYWlsOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICB1c2VyOiB7fSwKICAgICAgbG9naW5fc3RhdHVzOiBmYWxzZQogICAgfTsKICB9LAogIC8vIG1vdW50ZWQoKSB7CiAgLy8gICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbl9zdGF0dXMpIHsKICAvLyAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ1RpbWVMaW5lJ30pCiAgLy8gICAgIH0KICAvLyB9LAogIG1ldGhvZHM6IHsKICAgIHNpZ25VcDogZnVuY3Rpb24gc2lnblVwKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5uYW1lID0gX3RoaXMubGFzdG5hbWUgKyAiICIgKyBfdGhpcy5maXJzdG5hbWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcygpLnBvc3QoIi9hdXRoIiwgewogICAgICAgICAgICAgICAgICBlbWFpbDogX3RoaXMuZW1haWwsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBfdGhpcy5wYXNzd29yZAogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICBfdGhpcy51c2VyID0gewogICAgICAgICAgICAgICAgICAgIHVpZDogcmVzcG9uc2UuaGVhZGVyc1sidWlkIl0sCiAgICAgICAgICAgICAgICAgICAgImFjY2Vzcy10b2tlbiI6IHJlc3BvbnNlLmhlYWRlcnNbImFjY2Vzcy10b2tlbiJdLAogICAgICAgICAgICAgICAgICAgIGNsaWVudDogcmVzcG9uc2UuaGVhZGVyc1siY2xpZW50Il0sCiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEuZGF0YVsiaWQiXQogICAgICAgICAgICAgICAgICB9LCBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXJMb2dpbicsIF90aGlzLnVzZXIpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zKCkucHV0KCcvdXNlcnMvJyArIF90aGlzLnVzZXJbImlkIl0sIHsKICAgICAgICAgICAgICAgICAgZW1haWw6IF90aGlzLmVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogX3RoaXMucGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgIG5hbWU6IF90aGlzLm5hbWUKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdhY2Nlc3MtdG9rZW4nOiBfdGhpcy51c2VyWyJhY2Nlc3MtdG9rZW4iXSwKICAgICAgICAgICAgICAgICAgICB1aWQ6IF90aGlzLnVzZXJbInVpZCJdLAogICAgICAgICAgICAgICAgICAgIGNsaWVudDogX3RoaXMudXNlclsiY2xpZW50Il0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgna2VlcExvZ2luJywgX3RoaXMuc3RhdHVzKTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZW1haWwgPT0gX3RoaXMudXNlclsidWlkIl0pIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnVGltZUxpbmUnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbkluOiBmdW5jdGlvbiBzaWduSW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXhpb3MoKS5wb3N0KCIvYXV0aC9zaWduX2luIiwgewogICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnVzZXIgPSB7CiAgICAgICAgICB1aWQ6IHJlc3BvbnNlLmhlYWRlcnNbInVpZCJdLAogICAgICAgICAgImFjY2Vzcy10b2tlbiI6IHJlc3BvbnNlLmhlYWRlcnNbImFjY2Vzcy10b2tlbiJdLAogICAgICAgICAgY2xpZW50OiByZXNwb25zZS5oZWFkZXJzWyJjbGllbnQiXSwKICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLmRhdGFbImlkIl0KICAgICAgICB9LCBjb25zb2xlLmxvZyhfdGhpczIubG9naW5fc3RhdHVzKTsKCiAgICAgICAgX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgndXNlckxvZ2luJywgX3RoaXMyLnVzZXIpOwoKICAgICAgICBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCdrZWVwTG9naW4nLCBfdGhpczIubG9naW5fc3RhdHVzKTsKCiAgICAgICAgaWYgKF90aGlzMi5lbWFpbCA9PSBfdGhpczIudXNlclsidWlkIl0pIHsKICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnVGltZUxpbmUnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <v-container>\n        <v-row justify=\"center\" class=\"mt-5\">\n            <img src=\"../assets/img/sakura-logo.png\" width=\"180\" height=\"180\">\n        </v-row>\n        <v-layout wrap class='justify-center'>\n          <v-flex xs12 sm10 md8>\n            <v-row class=\"ml-3 mr-3 mt-7\">\n                <v-col>\n                    <v-text-field\n                        v-model=\"lastname\"\n                        label=\"姓\"\n                        outlined\n                        filled\n                        rounded\n                        background-color=\"grey lighten-5\"\n                    ></v-text-field>\n                </v-col>\n                <v-col>\n                    <v-text-field\n                        v-model=\"firstname\"\n                        label=\"名\"\n                        outlined\n                        filled\n                        rounded\n                        background-color=\"grey lighten-5\"\n                    ></v-text-field>\n                </v-col>\n            </v-row>\n            <v-row class=\"ml-3 mr-3 mt-n7\"> \n                <v-col>\n                    <v-text-field\n                        v-model=\"email\"\n                        label=\"メールアドレス\"\n                        outlined\n                        filled\n                        rounded\n                        background-color=\"grey lighten-5\"\n                    ></v-text-field>\n                </v-col>\n            </v-row>\n              <v-row class=\"ml-3 mr-3 mt-n7\"> \n                <v-col>\n                    <v-text-field\n                        v-model=\"password\"\n                        type=\"password\"\n                        label=\"パスワード\"\n                        outlined\n                        filled\n                        rounded\n                        background-color=\"grey lighten-5\"\n                    ></v-text-field>\n                </v-col>\n              </v-row>\n          </v-flex>\n        </v-layout>\n        <div class=\"text-center\">\n            <v-row class=\"mt-n5\" align=\"center\"> \n                <v-col>\n                    <v-btn\n                        depressed\n                        rounded\n                        color=\"blue lighten-3\"\n                        x-large\n                        @click=\"signIn\"\n                    >\n                        ログイン\n                    </v-btn>\n                </v-col>\n            </v-row>\n            <v-row class=\"mt-n1\" align=\"center\"> \n                <v-col>\n                    <v-btn\n                        depressed\n                        rounded\n                        color=\"grey lighten-2\"\n                        x-large\n                        @click=\"signUp\"\n                    >\n                        新規ユーザー登録\n                    </v-btn>\n                </v-col>\n            </v-row>\n            <v-row class='justify-center'>\n              <v-switch\n                v-model=\"login_status\"\n                class=\"ma-1\"\n                label=\"次回から自動ログインする\"\n              ></v-switch>\n            </v-row>\n        </div>\n    </v-container>\n</template>\n\n<script>\nimport axios from '@/api/index'\n\n\nexport default {\n  data() {\n    return {\n      firstname: \"\",\n      lastname: \"\",\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      user: {},\n      login_status: false,\n    };\n  },\n\n  // mounted() {\n  //     if (this.$store.state.login_status) {\n  //       this.$router.push({name: 'TimeLine'})\n  //     }\n  // },\n\n  methods: {\n    async signUp() {\n      this.name =this.lastname + \" \" +this.firstname\n\n      await axios()\n        .post(\"/auth\", {\n          email: this.email,\n          password: this.password,\n        })\n        .then((response) => {\n          console.log(response)\n          this.user = {\n            uid: response.headers[\"uid\"],\n            \"access-token\": response.headers[\"access-token\"],\n            client: response.headers[\"client\"],\n            id: response.data.data[\"id\"],\n          },\n          this.$store.dispatch('userLogin', this.user)\n        });\n      await axios().put('/users/' + this.user[\"id\"], {\n        email: this.email,\n        password: this.password,\n        name: this.name\n      },\n      {\n        headers: {\n           'access-token': this.user[\"access-token\"],\n            uid: this.user[\"uid\"],\n            client: this.user[\"client\"],\n          },\n      }\n      )\n      this.$store.dispatch('keepLogin', this.status)\n      if (this.email == this.user[\"uid\"]){\n            this.$router.push({name: 'TimeLine'})\n      }\n    },\n\n    signIn() {\n      axios()\n        .post(\"/auth/sign_in\", {\n          email: this.email,\n          password: this.password,\n        })\n        .then((response) => {\n          this.user = {\n            uid: response.headers[\"uid\"],\n            \"access-token\": response.headers[\"access-token\"],\n            client: response.headers[\"client\"],\n            id: response.data.data[\"id\"],\n          },\n          console.log(this.login_status)\n          this.$store.dispatch('userLogin', this.user)\n          this.$store.dispatch('keepLogin', this.login_status)\n          if (this.email == this.user[\"uid\"]){\n            this.$router.push({name: 'TimeLine'})\n          }\n        });    \n    },\n  },\n};\n</script>\n\n"],"sourceRoot":"src/views"}]}