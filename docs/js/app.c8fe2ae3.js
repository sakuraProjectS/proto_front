(function(t){function e(e){for(var r,i,o=e[0],l=e[1],c=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(r=!1)}r&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},s={app:0},n=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/sakura-front/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"006b":function(t,e,a){t.exports=a.p+"img/sakura-logo.a9c7be11.png"},"2a37":function(t,e,a){"use strict";a("5ccf")},"3e11":function(t,e,a){t.exports=a.p+"img/kame.9b31ae1e.jpg"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-main",{staticClass:"v-application"},[a("router-view")],1)],1)},n=[],i=(a("b0c0"),{data:function(){return{isActive:!1}},name:"App",components:{},mounted:function(){"Login"!=this.$route.name&&(this.isActive=!0)}}),o=i,l=(a("ac29"),a("2877")),c=a("6544"),u=a.n(c),d=a("7496"),m=a("f6c4"),v=Object(l["a"])(o,s,n,!1,null,"fa0249ce",null),f=v.exports;u()(v,{VApp:d["a"],VMain:m["a"]});var h=a("8c4f"),g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-row",{staticClass:"mt-5",attrs:{justify:"center"}},[r("img",{attrs:{src:a("006b"),width:"180",height:"180"}})]),r("v-layout",{staticClass:"justify-center",attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:"",sm10:"",md8:""}},[r("v-row",{staticClass:"ml-3 mr-3 mt-7"},[r("v-col",[r("v-text-field",{attrs:{label:"姓",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}})],1),r("v-col",[r("v-text-field",{attrs:{label:"名",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:t.firstname,callback:function(e){t.firstname=e},expression:"firstname"}})],1)],1),r("v-row",{staticClass:"ml-3 mr-3 mt-n7"},[r("v-col",[r("v-text-field",{attrs:{label:"メールアドレス",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),r("v-row",{staticClass:"ml-3 mr-3 mt-n7"},[r("v-col",[r("v-text-field",{attrs:{type:"password",label:"パスワード",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)],1)],1),r("div",{staticClass:"text-center"},[r("v-row",{staticClass:"mt-n5",attrs:{align:"center"}},[r("v-col",[r("v-btn",{attrs:{depressed:"",rounded:"",color:"blue lighten-3","x-large":""},on:{click:t.signIn}},[t._v(" ログイン ")])],1)],1),r("v-row",{staticClass:"mt-n1",attrs:{align:"center"}},[r("v-col",[r("v-btn",{attrs:{depressed:"",rounded:"",color:"grey lighten-2","x-large":""},on:{click:t.signUp}},[t._v(" 新規ユーザー登録 ")])],1)],1),r("v-row",{staticClass:"justify-center"},[r("v-switch",{staticClass:"ma-1",attrs:{label:"次回から自動ログインする"},model:{value:t.login_status,callback:function(e){t.login_status=e},expression:"login_status"}})],1)],1)],1)},p=[],_=a("1da1"),b=(a("96cf"),a("bc3a")),w=a.n(b),k=function(){return w.a.create({baseURL:"https://www.sakuraproto.com/v1"})},x={data:function(){return{firstname:"",lastname:"",name:"",email:"",password:"",user:{},login_status:!1}},methods:{signUp:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.name=t.lastname+" "+t.firstname,e.next=3,k().post("/auth",{email:t.email,password:t.password}).then((function(e){t.user={uid:e.headers["uid"],"access-token":e.headers["access-token"],client:e.headers["client"],id:e.data.data["id"]},t.$store.dispatch("userLogin",t.user)}));case 3:return e.next=5,k().put("/users/"+t.user["id"],{email:t.email,password:t.password,name:t.name},{headers:{"access-token":t.user["access-token"],uid:t.user["uid"],client:t.user["client"]}});case 5:t.$store.dispatch("keepLogin",t.status),t.email==t.user["uid"]&&t.$router.push({name:"TimeLine"});case 7:case"end":return e.stop()}}),e)})))()},signIn:function(){var t=this;k().post("/auth/sign_in",{email:this.email,password:this.password}).then((function(e){t.user={uid:e.headers["uid"],"access-token":e.headers["access-token"],client:e.headers["client"],id:e.data.data["id"]},t.$store.dispatch("userLogin",t.user),t.$store.dispatch("keepLogin",t.login_status),t.email==t.user["uid"]&&t.$router.push({name:"TimeLine"})}))}},mounted:function(){this.$store.dispatch("changeURL","https://www.sakuraproto.com")}},y=x,V=a("8336"),C=a("62ad"),j=a("a523"),L=a("0e8f"),I=a("a722"),O=a("0fd9"),R=a("b73d"),S=a("8654"),$=Object(l["a"])(y,g,p,!1,null,null,null),P=$.exports;u()($,{VBtn:V["a"],VCol:C["a"],VContainer:j["a"],VFlex:L["a"],VLayout:I["a"],VRow:O["a"],VSwitch:R["a"],VTextField:S["a"]});var F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticClass:"mt-3 ml-3"},[a("p",{staticClass:"text-h6"},[t._v(" 連絡先 ")])]),a("v-row",{staticClass:"mr-2 mt-0"},[a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:t.returnPage}},[a("v-icon",[t._v(" mdi-arrow-left-thick ")])],1)],1),a("v-col",{attrs:{cols:"10"}}),a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:t.showRequest}},[a("v-icon",[t._v(" mdi-account-plus ")])],1)],1)],1),a("v-divider"),a("v-row",{staticClass:"mt-3"},[a("v-layout",{staticClass:"justify-center align-center",attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm10:"",md10:""}},[a("v-card",{attrs:{color:"rgb(0, 0, 0, 0)",elevation:"0"}},[a("v-list",{attrs:{color:"rgb(0, 0, 0, 0)","two-line":""}},[t._l(t.frineds,(function(e){return[a("v-list-item",{key:e.name},[a("v-row",[a("v-col",[a("v-row",[a("v-list-item-icon",[a("v-avatar",{attrs:{size:"50"}},[a("img",{attrs:{src:t.railsURL+e.avatar_url}})])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-h8"},[t._v(" "+t._s(e.name))]),a("v-list-item-subtitle",[t._v(" "+t._s(e.birthdate))])],1)],1)],1),a("v-col",{staticClass:"mr-1 mt-3",attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.showProfile(e.id)}}},[a("v-icon",[t._v(" mdi-alpha-i-circle ")])],1)],1),a("v-col",{staticClass:"mr-5 mt-3",attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.editMessage(e.id)}}},[a("v-icon",[t._v(" mdi-email ")])],1)],1)],1)],1)]}))],2)],1)],1)],1)],1)],1)},E=[],M=a("5530"),D=a("2f62"),U={data:function(){return{frineds:{},dialog:!1,select:{name:null,avatar:null,birthdate:null}}},mounted:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k().get("/family/"+t.user_info["id"],{headers:t.user_info}).then((function(e){return t.frineds=e.data.friends}));case 2:case"end":return e.stop()}}),e)})))()},methods:{editMessage:function(t){this.$router.push({name:"SendMessage",params:{to_id:t}})},showProfile:function(t){this.$router.push({name:"FriendProfile",params:{profile_id:t}})},showRequest:function(){this.$router.push({name:"ShowRequest"})},returnPage:function(){this.$router.push({name:"TimeLine"})}},computed:Object(M["a"])({},Object(D["b"])(["user_info","railsURL"]))},T=U,A=a("8212"),z=a("b0af"),B=a("ce7e"),N=a("132d"),q=a("8860"),G=a("da13"),H=a("5d23"),Y=a("34c3"),J=Object(l["a"])(T,F,E,!1,null,null,null),K=J.exports;u()(J,{VAvatar:A["a"],VBtn:V["a"],VCard:z["a"],VCol:C["a"],VContainer:j["a"],VDivider:B["a"],VFlex:L["a"],VIcon:N["a"],VLayout:I["a"],VList:q["a"],VListItem:G["a"],VListItemContent:H["a"],VListItemIcon:Y["a"],VListItemSubtitle:H["b"],VListItemTitle:H["c"],VRow:O["a"]});var Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticClass:"mt-3 ml-3"},[a("p",{staticClass:"text-h6"},[t._v(" メッセージ ")])]),a("v-row",{staticClass:"mr-2 mt-0 mb-0"},[a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:t.returnPage}},[a("v-icon",[t._v(" mdi-arrow-left-thick ")])],1)],1)],1),a("v-divider",{staticClass:"mt-0"}),a("v-layout",{staticClass:"mt-0",attrs:{wrap:""}},[a("v-flex",{attrs:{xs:"12",sm:"10",md:"6"}},[a("v-card",{staticClass:"mt-3",attrs:{height:"550",rounded:"xl"}},[a("v-container",{attrs:{fluid:""}},[a("v-row",{staticClass:"mt-1"},[a("v-col",{staticClass:"mt-3 ml-1",attrs:{cols:"2"}},[a("v-img",{staticStyle:{"object-fit":"cover"},attrs:{src:t.railsURL+t.avatar,"max-height":"50","max-width":"40"}})],1),a("v-col",[a("v-divider",{attrs:{vertical:""}})],1),a("v-col",{staticClass:"ml-0",attrs:{cols:"9"}},[a("v-row",{staticClass:"text-h8"},[t._v(" "+t._s(t.from_name)+" ")]),a("v-row",{staticClass:"text-caption"},[t._v(" "+t._s(t.message.title)+" ")]),a("v-row",{staticClass:"text-overline ma-0 pa-0",attrs:{justify:"center"}},[t._v(" "+t._s(t.message.time)+" ")]),a("v-row",{staticClass:"text-overline ma-0 pa-0",attrs:{justify:"center"}},[a("v-icon",[t._v(" mdi-arrow-up ")])],1),a("v-row",{staticClass:"text-overline ma-0 pa-0",attrs:{justify:"center"}},[t._v(" "+t._s(t.message.created_time)+" ")])],1)],1),a("v-divider",{staticClass:"mt-1"}),a("v-row",{staticClass:"mt-5 ml-2 mr-2"},[t._v(" "+t._s(t.message.body)+" ")]),a("v-row",{staticClass:"mt-10 ml-2 mr-2"},[a("v-img",{attrs:{src:t.railsURL+t.message.image_url,height:"200",width:"100"},on:{click:function(e){t.dialog=!0}}})],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{rounded:"xl"}},[a("v-img",{attrs:{src:t.railsURL+t.message.image_url}})],1)],1)],1)],1)],1)],1)],1)},W=[],X=(a("fb6a"),""),Z="",tt={data:function(){return{message_id:"",message:{},uploadedImage:"",avatar:"",from_name:"",dialog:!1}},computed:Object(M["a"])({},Object(D["b"])(["user_info","railsURL"])),created:function(){this.message_id=this.$route.params.message_id,this.avatar=this.$route.params.avatar_url,this.from_name=this.$route.params.from_name},mounted:function(){var t=this;k().get("/users/"+this.user_info["id"]+"/messages/"+this.message_id,{headers:this.user_info}).then((function(e){return t.message=e.data,X=new Date(1e3*t.message.time),t.message.time=X.getFullYear()+"/"+("0"+(X.getMonth()+1)).slice(-2)+"/"+("0"+X.getDate()).slice(-2)+" "+("0"+X.getHours()).slice(-2)+":"+("0"+X.getMinutes()).slice(-2),Z=new Date(1e3*t.message.created_time),t.message.created_time=Z.getFullYear()+"/"+("0"+(Z.getMonth()+1)).slice(-2)+"/"+("0"+Z.getDate()).slice(-2)+" "+("0"+Z.getHours()).slice(-2)+":"+("0"+Z.getMinutes()).slice(-2),console.log(t.message)}))},methods:{returnPage:function(){this.$router.push({name:"TimeLine"})}}},et=tt,at=a("169a"),rt=a("adda"),st=Object(l["a"])(et,Q,W,!1,null,null,null),nt=st.exports;u()(st,{VBtn:V["a"],VCard:z["a"],VCol:C["a"],VContainer:j["a"],VDialog:at["a"],VDivider:B["a"],VFlex:L["a"],VIcon:N["a"],VImg:rt["a"],VLayout:I["a"],VRow:O["a"]});var it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"bg",attrs:{fluid:"","fill-height":""}},[a("v-row",{staticClass:"mt-3 ml-3"},[a("p",{staticClass:"text-h6"},[t._v(" 大切な人のプロフィール ")])]),a("v-row",{staticClass:"mr-2 mt-0 mb-0"},[a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:t.returnPage}},[a("v-icon",[t._v(" mdi-arrow-left-thick ")])],1)],1)],1),a("v-layout",{staticClass:"justify-center",attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm9:"",md6:""}},[a("v-row",{staticClass:"mb-5 mt-5",attrs:{justify:"center"}},[a("v-avatar",{attrs:{size:"100"}},[a("v-img",{attrs:{src:t.railsURL+t.avatar}})],1)],1),a("v-card",{attrs:{height:"450",rounded:"xl"}},[a("v-container",[a("v-row",[a("v-col",[a("v-list",{attrs:{"two-line":""}},[t._l(t.items,(function(e,r,s){return[a("v-list-item",{key:r},[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(r)+" ")]),a("v-list-item-subtitle",[t._v(" "+t._s(e)+" ")])],1)],1),s<Object.keys(t.items).length?a("v-divider",{key:e}):t._e()]}))],2)],1)],1)],1)],1)],1)],1)],1)},ot=[],lt={props:["profile_id"],data:function(){return{avatar:"",uploadedImage:"",items:{}}},mounted:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k().get("/profile/"+t.profile_id,{headers:t.user_info}).then((function(e){return t.avatar=e.data.avatar_url,t.items["Name"]=e.data.name,t.items["Date of birth"]=e.data.birthdate,t.items["E-mail"]=e.data.email,console.log(t.items)}));case 2:case"end":return e.stop()}}),e)})))()},methods:{returnPage:function(){this.$router.push({name:"Send"})}},computed:Object(M["a"])({},Object(D["b"])(["user_info","railsURL"]))},ct=lt,ut=(a("6c70"),Object(l["a"])(ct,it,ot,!1,null,null,null)),dt=ut.exports;u()(ut,{VAvatar:A["a"],VBtn:V["a"],VCard:z["a"],VCol:C["a"],VContainer:j["a"],VDivider:B["a"],VFlex:L["a"],VIcon:N["a"],VImg:rt["a"],VLayout:I["a"],VList:q["a"],VListItem:G["a"],VListItemContent:H["a"],VListItemSubtitle:H["b"],VListItemTitle:H["c"],VRow:O["a"]});var mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"bg",attrs:{fluid:"","fill-height":""}},[r("v-row",{staticClass:"mt-3 ml-3"},[r("p",{staticClass:"text-h6"},[t._v(" プロフィール ")])]),r("v-row",{staticClass:"mr-2 mt-0 mb-0"},[r("v-col",{attrs:{cols:"1"}},[r("v-btn",{attrs:{icon:""},on:{click:t.returnPage}},[r("v-icon",[t._v(" mdi-arrow-left-thick ")])],1)],1),r("v-col",{attrs:{cols:"10"}}),r("v-col",{attrs:{cols:"1"}},[r("v-btn",{attrs:{icon:""},on:{click:t.editProfile}},[r("v-icon",[t._v(" mdi-pen ")])],1)],1)],1),r("v-layout",{staticClass:"justify-center",attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:"",sm9:"",md6:""}},[r("v-divider",{staticClass:"mt-0"}),t.avatar?r("v-row",{staticClass:"mb-5 mt-5",attrs:{justify:"center"}},[r("v-avatar",{attrs:{size:"100"}},[r("v-img",{attrs:{src:t.railsURL+t.avatar}})],1)],1):r("v-row",{staticClass:"mb-5 mt-5",attrs:{justify:"center"}},[r("v-avatar",{attrs:{size:"100"}},[r("v-img",{attrs:{src:a("3e11")}})],1)],1),r("v-card",{attrs:{height:"450",rounded:"xl"}},[r("v-container",[r("v-row",[r("v-col",[r("v-list",{attrs:{"two-line":""}},[t._l(t.items,(function(e,a,s){return[r("v-list-item",{key:a},[r("v-list-item-content",[r("v-list-item-title",[t._v(" "+t._s(a)+" ")]),r("v-list-item-subtitle",[t._v(" "+t._s(e)+" ")])],1)],1),s<Object.keys(t.items).length?r("v-divider",{key:e}):t._e()]}))],2)],1)],1)],1)],1)],1)],1)],1)},vt=[],ft={data:function(){return{avatar:"",uploadedImage:"",items:{}}},mounted:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k().get("/profile/"+t.user_info["id"],{headers:t.user_info}).then((function(e){return t.avatar=e.data.avatar_url,t.items["Name"]=e.data.name,t.items["Date of birth"]=e.data.birthdate,t.items["E-mail"]=e.data.email}));case 2:case"end":return e.stop()}}),e)})))()},methods:{editProfile:function(){this.$router.push({name:"ProfileEdit"})},returnPage:function(){this.$router.push({name:"TimeLine"})}},computed:Object(M["a"])({},Object(D["b"])(["user_info","railsURL"]))},ht=ft,gt=(a("2a37"),Object(l["a"])(ht,mt,vt,!1,null,null,null)),pt=gt.exports;u()(gt,{VAvatar:A["a"],VBtn:V["a"],VCard:z["a"],VCol:C["a"],VContainer:j["a"],VDivider:B["a"],VFlex:L["a"],VIcon:N["a"],VImg:rt["a"],VLayout:I["a"],VList:q["a"],VListItem:G["a"],VListItemContent:H["a"],VListItemSubtitle:H["b"],VListItemTitle:H["c"],VRow:O["a"]});var _t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"bg",attrs:{fluid:"","fill-height":""}},[r("v-row",{staticClass:"mt-3 ml-3"},[r("p",{staticClass:"text-h6"},[t._v(" プロフィール編集")])]),r("v-row",{staticClass:"ml-1"},[r("v-btn",{attrs:{icon:""},on:{click:t.returnPage}},[r("v-icon",[t._v(" mdi-arrow-left-thick ")])],1)],1),r("v-layout",{staticClass:"justify-center",attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:"",sm9:"",md6:""}},[r("v-divider",{staticClass:"mt-5"}),t.avatar?r("v-row",{staticClass:"mt-10 mb-15",attrs:{justify:"center"}},[r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog_avatar=!0}}},[r("v-avatar",{attrs:{size:"100"}},[r("v-img",{attrs:{src:t.railsURL+t.avatar}})],1)],1),r("v-dialog",{attrs:{"retain-focus":!1,persistent:"","max-width":"600px"},model:{value:t.dialog_avatar,callback:function(e){t.dialog_avatar=e},expression:"dialog_avatar"}},[r("v-card",[r("v-card-title",[t._v(" プロフィール画像を変更 ")]),r("input",{ref:"file",attrs:{name:"uploadedImage",type:"file",accept:"image/png, image/jpeg"},on:{change:t.onFileChange}}),r("br"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:t.postItem}},[r("v-icon",[t._v(" mdi-book ")])],1),r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog_avatar=!1}}},[r("v-icon",[t._v(" mdi-close ")])],1)],1)],1)],1)],1):r("v-row",{staticClass:"mt-10 mb-15",attrs:{justify:"center"}},[r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog_avatar=!0}}},[r("v-avatar",{attrs:{size:"100"}},[r("v-img",{attrs:{src:a("3e11")}})],1)],1),r("v-dialog",{attrs:{"retain-focus":!1,persistent:"","max-width":"600px"},model:{value:t.dialog_avatar,callback:function(e){t.dialog_avatar=e},expression:"dialog_avatar"}},[r("v-card",[r("v-card-title",[t._v(" プロフィール画像を変更 ")]),r("input",{ref:"file",attrs:{name:"uploadedImage",type:"file",accept:"image/png, image/jpeg"},on:{change:t.onFileChange}}),r("br"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:t.postItem}},[r("v-icon",[t._v(" mdi-book ")])],1),r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog_avatar=!1}}},[r("v-icon",[t._v(" mdi-close ")])],1)],1)],1)],1)],1),r("v-card",{attrs:{height:"450",rounded:"xl"}},[r("v-container",[r("v-row",[r("v-col",[r("v-list",{attrs:{"two-line":""}},[t._l(t.items,(function(e,a,s){return[r("v-list-item",{key:a},[r("v-list-item-content",[r("v-list-item-title",[t._v(" "+t._s(a)+" ")]),r("v-row",[r("v-col",{attrs:{cols:"9"}},[r("v-list-item-subtitle",[t._v(" "+t._s(e)+" ")])],1),r("v-col",[0===s?r("div",[r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog_0=!0}}},[r("v-icon",[t._v(" mdi-pen ")])],1)],1):t._e(),1===s?r("div",[r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog_1=!0}}},[r("v-icon",[t._v(" mdi-pen ")])],1)],1):t._e()])],1)],1)],1),s<Object.keys(t.items).length?r("v-divider",{key:e}):t._e()]}))],2)],1)],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialog_1,callback:function(e){t.dialog_1=e},expression:"dialog_1"}},[r("v-card",{attrs:{rounded:"xl"}},[r("v-card-title",[r("span",{staticClass:"headline"},[t._v("生年月日")])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",[r("v-select",{attrs:{items:t.yearrange,label:"年"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),r("v-col",[r("v-select",{attrs:{items:t.monthrange,label:"月"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1),r("v-col",[r("v-select",{attrs:{items:t.daysrange,label:"日"},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog_1=!1}}},[t._v(" Close ")]),r("v-btn",{attrs:{icon:"",dialog_1:"false"},on:{click:t.registerBirthdate}},[r("v-icon",[t._v(" mdi-check")])],1)],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialog_0,callback:function(e){t.dialog_0=e},expression:"dialog_0"}},[r("v-card",{attrs:{rounded:"xl"}},[r("v-row",{staticClass:"ml-3 mr-3 mt-7"},[r("v-col",[r("v-text-field",{attrs:{label:"姓",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}})],1),r("v-col",[r("v-text-field",{attrs:{label:"名",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:t.firstname,callback:function(e){t.firstname=e},expression:"firstname"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog_0=!1}}},[t._v(" Close ")]),r("v-btn",{attrs:{icon:"",dialog_0:"false"},on:{click:t.changeName}},[r("v-icon",[t._v(" mdi-check")])],1)],1)],1)],1)],1)],1)],1)},bt=[],wt=a("2909"),kt=(a("d81d"),a("cb29"),1950),xt=2030,yt=new Array(xt-kt+1).fill(null).map((function(t,e){return e+kt})),Vt=1,Ct=12,jt=new Array(Ct-Vt+1).fill(null).map((function(t,e){return e+Vt})),Lt=Object(wt["a"])(Array(31)).map((function(t,e){return e})),It={data:function(){return{year:"",yearrange:yt,month:"",monthrange:jt,day:"",daysrange:Lt,dialog_0:!1,dialog_1:!1,dialog_avatar:!1,uploadedImage:"",items:{},avatar:"",lastname:"",firstname:""}},mounted:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k().get("/profile/"+t.user_info["id"],{headers:t.user_info}).then((function(e){return t.avatar=e.data.avatar_url,t.items["Name"]=e.data.name,t.items["Date of birth"]=e.data.birthdate,t.items["E-mail"]=e.data.email}));case 2:case"end":return e.stop()}}),e)})))()},methods:{registerBirthdate:function(){var t=this;k().put("/update_birthdate/",{id:localStorage.getItem("id"),year:this.year,month:this.month,day:this.day},{headers:this.user_info}).then((function(e){return console.log(e),t.$router.push({name:"Profile"})}))},changeName:function(){var t=this;this.name=this.lastname+" "+this.firstname,k().put("/users/"+this.user_info["id"],{name:this.name},{headers:this.user_info}).then((function(e){return console.log(e),t.$router.push({name:"Profile"})}))},onFileChange:function(t){t.preventDefault();var e=t.target.files;this.uploadedImage=e[0],this.profile.avatar=this.uploadedImage},postItem:function(){var t=this,e=new FormData;e.append("avatar",this.uploadedImage),e.append("id",localStorage.getItem("id")),console.log(e),k().put("/update_avatar",e,{headers:this.user_info}).then((function(e){t.uploadedImage="",t.$refs.file.value="",t.avatar=e.data.avatar,t.$router.push({name:"Profile"})})).catch((function(t){console.log(t)}))},returnPage:function(){this.$router.push({name:"Profile"})}},computed:Object(M["a"])({},Object(D["b"])(["user_info","railsURL"]))},Ot=It,Rt=(a("e46a"),a("99d9")),St=a("b974"),$t=a("2fa4"),Pt=Object(l["a"])(Ot,_t,bt,!1,null,null,null),Ft=Pt.exports;u()(Pt,{VAvatar:A["a"],VBtn:V["a"],VCard:z["a"],VCardActions:Rt["a"],VCardText:Rt["b"],VCardTitle:Rt["c"],VCol:C["a"],VContainer:j["a"],VDialog:at["a"],VDivider:B["a"],VFlex:L["a"],VIcon:N["a"],VImg:rt["a"],VLayout:I["a"],VList:q["a"],VListItem:G["a"],VListItemContent:H["a"],VListItemSubtitle:H["b"],VListItemTitle:H["c"],VRow:O["a"],VSelect:St["a"],VSpacer:$t["a"],VTextField:S["a"]});var Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{wrap:""}},t._l(t.messages,(function(e){return a("v-flex",{key:e.to_data,attrs:{xs12:"",md6:"",lg3:""}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(e.name)+" ")])],1)],1)})),1)},Mt=[],Dt={data:function(){return{cardsize:"",messages:[{name:"田中 敏之",title:"誕生日おめでとう",body:"lkcnapkcnsakcnakncaspcnakpnakascacaca",from_date:"2021/03/21",to_date:"2021/05/23"},{name:"田中 権左衛門",title:"誕生日おめでとう",body:"lkcnapkcnsakcnakncaspcnakpnakascacaca",from_date:"2021/03/21",to_date:"2021/05/23"}]}},mounted:function(){switch(console.log(this.$vuetify.breakpoint.name),this.$vuetify.breakpoint.name){case"xs":this.cardsize=220;break;case"sm":this.cardsize=400;break;case"md":this.cardsize=500;break;case"lg":this.cardsize=600;break;case"xl":this.cardsize=800;break}}},Ut=Dt,Tt=Object(l["a"])(Ut,Et,Mt,!1,null,null,null),At=Tt.exports;u()(Tt,{VCard:z["a"],VCardTitle:Rt["c"],VFlex:L["a"],VLayout:I["a"]});var zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-row",{staticClass:"mt-3 ml-3"},[r("v-col",{attrs:{cols:"4"}},[r("p",{staticClass:"text-h6"},[t._v(" ホーム ")])]),r("v-col",{attrs:{cols:"6"}}),r("v-col",{attrs:{cols:"1"}},[r("v-btn",{attrs:{icon:""},on:{click:t.out}},[r("v-icon",[t._v(" mdi-logout ")])],1)],1)],1),r("v-row",{attrs:{justify:"end"}},[r("v-col",{attrs:{cols:"2"}},[r("v-btn",{attrs:{icon:""}},[r("v-icon",{attrs:{large:""}},[t._v(" mdi-bell-outline ")])],1)],1),r("v-col",{attrs:{cols:"2"}},[r("v-btn",{attrs:{icon:""}},[r("v-icon",{attrs:{large:""}},[t._v(" mdi-pencil-outline ")])],1)],1),r("v-col",{attrs:{cols:"2"}},[r("v-btn",{attrs:{icon:""},on:{click:t.showFriend}},[r("v-icon",{attrs:{large:""}},[t._v(" mdi-account-multiple-outline ")])],1)],1),t.myavatar?r("v-col",{attrs:{cols:"2"}},[r("v-btn",{attrs:{icon:""},on:{click:t.showProfile}},[r("v-avatar",{attrs:{size:"30"}},[r("v-img",{attrs:{src:t.railsURL+t.myavatar}})],1)],1)],1):r("v-col",{attrs:{cols:"2"}},[r("v-btn",{attrs:{icon:""},on:{click:t.showProfile}},[r("v-avatar",{attrs:{size:"30"}},[r("v-img",{attrs:{src:a("3e11")}})],1)],1)],1)],1),r("v-divider"),r("v-row",{staticClass:"mt-5 mb-3",attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"1"}}),r("v-col",{attrs:{cols:"3"}},[t.content>0?r("v-tab",[r("v-badge",{attrs:{color:"pink",icon:"mdi-heart"}},[r("v-badge",{attrs:{color:"pink",content:t.content,bottom:""}},[r("v-img",{attrs:{src:a("3e11"),"max-height":"100","max-width":"100"}})],1)],1)],1):t._e(),0===t.content?r("v-tab",[r("v-badge",{attrs:{color:"pink",icon:"mdi-heart"}},[r("v-img",{attrs:{src:a("3e11"),"max-height":"100","max-width":"100"}})],1)],1):t._e()],1),r("v-col",{staticClass:"mt-15",attrs:{cols:"4"}},[r("v-img",{attrs:{src:a("ad07"),"max-height":"100","max-width":"400"}})],1),r("v-col",{attrs:{cols:"3"}},[t.content>0?r("v-tab",[r("v-badge",{attrs:{color:"pink",icon:"mdi-heart"}},[r("v-badge",{attrs:{color:"pink",content:t.content,bottom:""}},[r("v-img",{attrs:{src:a("ace9"),"max-height":"100","max-width":"100"}})],1)],1)],1):t._e(),0===t.content?r("v-tab",[r("v-badge",{attrs:{color:"pink",icon:"mdi-heart"}},[r("v-img",{attrs:{src:a("ace9"),"max-height":"100","max-width":"100"}})],1)],1):t._e()],1),r("v-col",{attrs:{cols:"1"}})],1),r("v-layout",{attrs:{wrap:""}},t._l(t.messages,(function(e,s){return r("v-flex",{key:e.time,staticClass:"mt-5",attrs:{xs12:"",sm9:"",md6:""}},[r("v-row",{staticClass:"ma-1 mt-15",attrs:{align:"center",justify:"center"}},[r("v-btn",{attrs:{icon:""},on:{click:function(a){return t.showContent(e,s)}}},[r("v-card",{attrs:{height:"95",rounded:"xl",width:"100%"}},[r("v-container",[r("v-row",[t.avatar_urls[s]>0?r("v-col",{staticClass:"mt-3 ml-1",attrs:{cols:"2"}},[r("v-img",{staticStyle:{"object-fit":"cover"},attrs:{src:t.railsURL+t.avatar_urls[s],"max-height":"40","max-width":"40"}})],1):r("v-col",{staticClass:"mt-3 ml-1",attrs:{cols:"2"}},[r("v-img",{staticStyle:{"object-fit":"cover"},attrs:{src:a("3e11"),"max-height":"40","max-width":"40"}})],1),r("v-col",[r("v-divider",{attrs:{vertical:""}})],1),r("v-col",{staticClass:"ml-0",attrs:{cols:"9"}},[r("v-row",{staticClass:"text-h8"},[t._v(" "+t._s(t.users_name[s])+" ")]),r("v-row",{staticClass:"text-caption"},[t._v(" "+t._s(e.title)+" ")]),r("v-row",{staticClass:"text-overline",attrs:{justify:"center"}},[t._v(" "+t._s(e.time)+"←"+t._s(e.created_time)+" ")])],1)],1)],1)],1)],1)],1)],1)})),1)],1)},Bt=[],Nt=(a("159b"),""),qt="",Gt={data:function(){return{messages:[],dialog:!1,users:[],avatar_urls:[],users_name:[],myavatar:"",sending_messages:[],content:"",sortedMessages:[]}},methods:{showFriend:function(){this.$router.push({name:"Send"})},showProfile:function(){this.$router.push({name:"Profile"})},showContent:function(t,e){this.$router.push({name:"MessageContent",params:{message_id:t.id,avatar_url:this.avatar_urls[e],from_name:this.users_name[e]}})},deleteMessage:function(t){var e=this;k().delete("/messages/"+t.id,{headers:{"access-token":this.user_info["access-token"],uid:this.user_info["uid"],client:this.user_info["client"]}}).then((function(t){console.log(t),e.$router.go({path:e.$router.currentRoute.path,force:!0})})).catch((function(t){console.log(t)}))},out:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k().delete("/auth/sign_out",{headers:t.user_info});case 2:t.$store.state.login_status||t.$store.dispatch("userLogin",{"access-token":"",uid:"",id:"",client:""}),t.$router.push({name:"Login"});case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k().get("/profile/"+t.user_info["id"],{headers:t.user_info}).then((function(e){return t.myavatar=e.data.avatar_url}));case 2:return e.next=4,k().get("/users/"+t.user_info["id"]+"/messages",{headers:t.user_info}).then((function(e){return console.log(e),t.messages=e.data.messages,t.messages.forEach((function(t){return Nt=new Date(1e3*t.time),t.time=Nt.getFullYear()+"/"+("0"+(Nt.getMonth()+1)).slice(-2)+"/"+("0"+Nt.getDate()).slice(-2)+" "+("0"+Nt.getHours()).slice(-2)+":"+("0"+Nt.getMinutes()).slice(-2),qt=new Date(1e3*t.created_time),t.created_time=qt.getFullYear()+"/"+("0"+(qt.getMonth()+1)).slice(-2)+"/"+("0"+qt.getDate()).slice(-2)+" "+("0"+qt.getHours()).slice(-2)+":"+("0"+qt.getMinutes()).slice(-2)}))}));case 4:return t.messages.forEach((function(e){return k().get("users/"+e.from_user_id,{headers:t.user_info}).then((function(e){return t.users.push(e.data.id),t.users_name.push(e.data.name),t.avatar_urls.push(e.data.avatar_url)}))})),e.next=7,k().get("/sending/",{headers:t.user_info}).then((function(e){return t.sending_messages=e.data.messages,t.content=t.sending_messages.length,console.log(t.users_name)}));case 7:case"end":return e.stop()}}),e)})))()},computed:Object(M["a"])(Object(M["a"])({},Object(D["b"])(["user_info","railsURL"])),{},{sortedmessages:function(){return this.messages.slice().sort((function(t,e){return t.time>e.time?-1:t.time<e.time?1:0}))}})},Ht=Gt,Yt=a("4ca6"),Jt=a("71a3"),Kt=Object(l["a"])(Ht,zt,Bt,!1,null,null,null),Qt=Kt.exports;u()(Kt,{VAvatar:A["a"],VBadge:Yt["a"],VBtn:V["a"],VCard:z["a"],VCol:C["a"],VContainer:j["a"],VDivider:B["a"],VFlex:L["a"],VIcon:N["a"],VImg:rt["a"],VLayout:I["a"],VRow:O["a"],VTab:Jt["a"]});var Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticClass:"mt-3 ml-3"},[a("p",{staticClass:"text-h6"},[t._v(" メッセージ ")])]),a("v-row",{staticClass:"mr-2 mt-0"},[a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:t.returnPage}},[a("v-icon",[t._v(" mdi-arrow-left-thick ")])],1)],1)],1),a("v-divider",{staticClass:"mt-3"}),a("v-card",{staticClass:"mt-3",attrs:{height:"550"}},[a("v-alert",{attrs:{outlined:"",color:"yellow darken-3",height:"550"}},[a("v-row",{staticClass:"mt-0"},[a("v-col",{attrs:{cols:"2"}},[a("v-avatar",{attrs:{size:"50"}},[a("img",{attrs:{src:t.railsURL+t.user.avatar_url}})])],1),a("v-col",[a("v-text-field",{attrs:{outlined:"",label:"件名"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),a("v-row",[a("v-col",[a("v-select",{attrs:{items:t.yearrange,label:"年",height:"20",dense:""},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),a("v-col",[a("v-select",{attrs:{items:t.monthrange,label:"月",height:"20",dense:""},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1),a("v-col",[a("v-select",{attrs:{items:t.daysrange,label:"日",height:"20",dense:""},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}})],1)],1),a("v-row",[a("v-col",[a("v-select",{attrs:{items:t.hoursrange,label:"時",height:"20",dense:""},model:{value:t.hour,callback:function(e){t.hour=e},expression:"hour"}})],1),a("v-col",[a("v-select",{attrs:{items:t.minutesrange,label:"分",height:"20",dense:""},model:{value:t.minute,callback:function(e){t.minute=e},expression:"minute"}})],1)],1),a("v-row",[a("v-col",[a("input",{ref:"file",attrs:{name:"uploadedImage",type:"file",accept:"image/png, image/jpeg"},on:{change:t.onFileChange}}),a("br")])],1),a("v-row",[a("v-container",{attrs:{fluid:""}},[a("v-textarea",{attrs:{counter:"",label:"メッセージ",value:t.value,outlined:""},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1)],1),a("v-row",{staticClass:"mt-0",attrs:{justify:"end"}},[a("v-btn",{attrs:{outlined:"",text:""},on:{click:t.saveMessage}},[t._v(" 保存する ")]),a("v-btn",{attrs:{outlined:"",text:""},on:{click:t.sendMessage}},[t._v("送信する")])],1)],1)],1)],1)},Xt=[],Zt=(a("d3b7"),a("ddb0"),2021),te=2100,ee=new Array(te-Zt+1).fill(null).map((function(t,e){return e+Zt})),ae=1,re=12,se=new Array(re-ae+1).fill(null).map((function(t,e){return e+ae})),ne=1,ie=31,oe=new Array(ie-ne+1).fill(null).map((function(t,e){return e+ne})),le=Object(wt["a"])(Array(24)).map((function(t,e){return e})),ce=Object(wt["a"])(Array(60).keys()),ue={props:["to_id"],data:function(){return{head:"メッセージ送信",value:null,item_minutes:["0","1","2","3","4","5"],user:[],select:"",to:"",body:"",year:"2021",yearrange:ee,month:"6",monthrange:se,day:"3",daysrange:oe,hour:"",hoursrange:le,minute:"",minutesrange:ce,time:[],title:[],uploadedImage:""}},computed:Object(M["a"])({},Object(D["b"])(["user_info","railsURL","message"])),mounted:function(){var t=this;k().get("/users/"+this.to_id,{headers:this.user_info},console.log(this.user_token)).then((function(e){return t.user=e.data,console.log(e)}))},methods:{sendMessage:function(){var t=this,e=new Date(this.year,this.month-1,this.day,this.hour,this.minute),a=new FormData;a.append("image",this.uploadedImage),a.append("from_id",localStorage.getItem("id")),a.append("to_id",this.to_id),a.append("title",this.title),a.append("body",this.body),a.append("time",e.getTime()/1e3),k().post("/users/"+this.user_info["id"]+"/messages",a,{headers:this.user_info}).then((function(e){return console.log(e.data),t.$router.push({name:"Send"})}))},onFileChange:function(t){t.preventDefault();var e=t.target.files;this.uploadedImage=e[0],console.log(e),console.log(this.uploadedImage)},returnPage:function(){this.$router.push({name:"Send"})},saveMesage:function(){var t={title:this.title,body:this.body,year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,to_id:this.to_id,image:this.image};this.$store.dispatch("saveMessage",t)}}},de=ue,me=(a("b89f"),a("0798")),ve=a("a844"),fe=Object(l["a"])(de,Wt,Xt,!1,null,"9f3c0738",null),he=fe.exports;u()(fe,{VAlert:me["a"],VAvatar:A["a"],VBtn:V["a"],VCard:z["a"],VCol:C["a"],VContainer:j["a"],VDivider:B["a"],VIcon:N["a"],VRow:O["a"],VSelect:St["a"],VTextField:S["a"],VTextarea:ve["a"]});var ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticClass:"mt-3 ml-3"},[a("p",{staticClass:"text-h6"},[t._v(" 大切な人を検索 ")])]),a("v-row",[a("v-btn",{attrs:{icon:""},on:{click:t.returnPage}},[a("v-icon",[t._v(" mdi-arrow-left-thick ")])],1)],1),a("v-divider",{staticClass:"mt-4"}),a("v-card",{staticClass:"mt-8"},[a("v-container",[a("v-row",{staticClass:"ml-2 mt-2 mr-2"},[a("v-text-field",{attrs:{outlined:"",label:"メールアドレス"},model:{value:t.mail,callback:function(e){t.mail=e},expression:"mail"}})],1),a("v-row",{staticClass:"mr-1 mt-0 mb-2",attrs:{justify:"end"}},[a("v-btn",{on:{click:t.searchUser}},[t._v(" 検索 ")])],1),t.userSearched.id?a("div",{staticClass:"mt-2"},[a("v-row",[a("v-col",{attrs:{cols:"9"}},[t._v(" "+t._s(t.userSearched.name)+" ")]),a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v(" mdi-account-plus ")])],1)],1)],1),a("v-dialog",{attrs:{"retain-focus":!1,persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-container",[a("v-card-title",[t._v(" フレンド申請")]),a("v-select",{attrs:{items:t.items,label:"あなたとの関係"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}}),a("v-row",{staticClass:"mt-3 mb-3 mr-2",attrs:{justify:"end"}},[a("v-btn",{attrs:{icon:"",large:""},on:{click:t.followFriend}},[a("v-icon",[t._v(" mdi-account-plus ")])],1),a("v-btn",{attrs:{icon:"",large:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v(" mdi-close ")])],1)],1)],1)],1)],1)],1):t._e()],1)],1),a("v-card",{staticClass:"mt-8"},[a("v-card-title",[t._v(" 申請中 ")]),a("v-list",t._l(t.toFriend,(function(e,r){return a("v-list-item",{key:r},[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.name)+" ")])],1),a("v-list-item-action",[a("v-btn",{on:{click:function(a){return t.destroyFriend(e.id)}}},[t._v(" 削除 ")])],1)],1)})),1)],1),a("v-card",{staticClass:"mt-8"},[a("v-card-title",[t._v(" 保留中 ")]),a("v-list",t._l(t.fromFriend,(function(e,r){return a("v-list-item",{key:r},[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.name)+" ")])],1),a("v-list-item-action",[a("v-btn",{on:{click:function(a){return t.acceptFriend(e.id)}}},[t._v(" 承諾 ")]),a("v-btn",{on:{click:function(a){return t.destroyFriend(e.id)}}},[t._v(" 削除 ")])],1)],1)})),1)],1)],1)},pe=[],_e={data:function(){return{toFriend:{},fromFriend:{},status:"",userSearched:{},mail:"",tmp_status:"",flash_message:"",dialog:!1,items:["家族以外","親","子","祖父母","孫","叔父叔母","甥姪","いとこ"],select:"",follower_relation:0,followed_relation:0}},computed:Object(M["a"])({},Object(D["b"])(["user_info"])),mounted:function(){var t=this;k().get("/users/"+this.user_info["id"]+"/followings",{headers:this.user_info}).then((function(e){return t.toFriend=e.data})),k().get("/users/"+this.user_info["id"]+"/followers",{headers:this.user_info}).then((function(e){return t.fromFriend=e.data}))},methods:{destroyFriend:function(t){var e=this;console.log(t),k().delete("/users/"+t+"/relationships",{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return e.status=t.data.status,console.log(t),e.$router.push({name:"Send"})}))},acceptFriend:function(t){var e=this;console.log(t),k().put("/users/"+t+"/relationships",{status:"true"},{headers:this.user_info}).then((function(t){return e.status=t.data.status,e.$router.push({name:"Send"})}))},searchUser:function(){var t=this;k().get("/users/"+localStorage.getItem("id")+"/search",{params:{email:this.mail}},{headers:this.user_info}).then((function(e){return console.log(e),t.userSearched=e.data,console.log(t.userSearched)}))},followFriend:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.userSearched.id),console.log(t.select),e.t0=t.select,e.next="家族以外"===e.t0?5:"親"===e.t0?8:"子"===e.t0?11:"祖父母"===e.t0?14:"孫"===e.t0?17:"叔父叔母"===e.t0?20:"甥姪"===e.t0?23:"いとこ"===e.t0?26:29;break;case 5:return t.followed_relation=0,t.follower_relation=0,e.abrupt("break",29);case 8:return t.followed_relation=1,t.follower_relation=2,e.abrupt("break",29);case 11:return t.followed_relation=2,t.follower_relation=1,e.abrupt("break",29);case 14:return t.followed_relation=3,t.follower_relation=4,e.abrupt("break",29);case 17:return t.followed_relation=3,t.follower_relation=4,e.abrupt("break",29);case 20:return t.followed_relation=5,t.follower_relation=6,e.abrupt("break",29);case 23:return t.followed_relation=5,t.follower_relation=6,e.abrupt("break",29);case 26:return t.followed_relation=7,t.follower_relation=7,e.abrupt("break",29);case 29:return e.next=31,k().post("/users/"+t.userSearched.id+"/relationships",{user_id:t.userSearched.id,follower_relation:t.follower_relation,followed_relation:t.followed_relation},{headers:t.user_info}).then((function(e){return t.tmp_status=e.data.status}));case 31:console.log(t.tmp_status),1==t.tmp_status?(console.log("aaa"),t.flash_message="すでに登録されています"):t.$router.push({name:"Send"});case 33:case"end":return e.stop()}}),e)})))()},returnPage:function(){this.$router.push({name:"Send"})}}},be=_e,we=a("1800"),ke=Object(l["a"])(be,ge,pe,!1,null,null,null),xe=ke.exports;u()(ke,{VBtn:V["a"],VCard:z["a"],VCardTitle:Rt["c"],VCol:C["a"],VContainer:j["a"],VDialog:at["a"],VDivider:B["a"],VIcon:N["a"],VList:q["a"],VListItem:G["a"],VListItemAction:we["a"],VListItemContent:H["a"],VListItemTitle:H["c"],VRow:O["a"],VSelect:St["a"],VTextField:S["a"]});var ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",t._l(t.messages,(function(e,r){return a("v-list-item",{key:e.time},[a("v-card",{attrs:{height:"100",width:"800"}},[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-avatar",[a("img",{attrs:{src:t.railsURL+t.avatar_urls[r]}})])],1),a("v-col",{attrs:{cols:"9"}},[t._v(" "+t._s(t.user_names[r])+"さんからメッセージが届きます ")])],1)],1)],1)})),1)},Ve=[],Ce="",je="",Le={data:function(){return{messages:[],dialog:!1,railsURL:"http://localhost:3000",user_names:[],users:[],avatar_urls:[]}},methods:{},mounted:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k().get("/sending/",{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(e){return console.log(e),t.messages=e.data.messages,t.messages.forEach((function(t){return Ce=new Date(1e3*t.time),t.time=Ce.getFullYear()+"/"+("0"+(Ce.getMonth()+1)).slice(-2)+"/"+("0"+Ce.getDate()).slice(-2)+" "+("0"+Ce.getHours()).slice(-2)+":"+("0"+Ce.getMinutes()).slice(-2),je=new Date(1e3*t.created_time),t.created_time=je.getFullYear()+"/"+("0"+(je.getMonth()+1)).slice(-2)+"/"+("0"+je.getDate()).slice(-2)+" "+("0"+je.getHours()).slice(-2)+":"+("0"+je.getMinutes()).slice(-2)})),t.users=e.data.users}));case 2:t.users.forEach((function(e){return k().get("users/"+e.id,{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(e){return t.user_names.push(e.data.name),t.avatar_urls.push(e.data.avatar_url)}))}));case 3:case"end":return e.stop()}}),e)})))()}},Ie=Le,Oe=Object(l["a"])(Ie,ye,Ve,!1,null,null,null),Re=Oe.exports;u()(Oe,{VAvatar:A["a"],VCard:z["a"],VCol:C["a"],VContainer:j["a"],VListItem:G["a"],VRow:O["a"]});var Se=a("0e44");r["a"].use(D["a"]);var $e=new D["a"].Store({state:{user_info:{uid:"","access-token":"",client:"",id:""},login_status:!1,railsURL:"https://www.sakuraproto.com",message:{title:"",body:"",year:"",month:"",day:"",house:"",minute:"",to_id:0,image:""}},mutations:{USER_LOGIN:function(t,e){t.user_info=e},KEEP_LOGIN:function(t,e){t.login_status=e},SAVE_MESSAGE:function(t,e){t.message=e}},actions:{userLogin:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,r("USER_LOGIN",e),a.abrupt("return",e);case 3:case"end":return a.stop()}}),a)})))()},keepLogin:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,r("KEEP_LOGIN",e),a.abrupt("return",e);case 3:case"end":return a.stop()}}),a)})))()},saveMessage:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,r("SAVE_MESSAGE",e),a.abrupt("return",e);case 3:case"end":return a.stop()}}),a)})))()}},plugins:[Object(Se["a"])({})],modules:{}});r["a"].use(h["a"]);var Pe=[{path:"/",name:"Login",component:P,meta:{isPublic:!0}},{path:"/send",name:"Send",component:K,props:!0},{path:"/profile",name:"Profile",component:pt},{path:"/profile_edit",name:"ProfileEdit",component:Ft},{path:"/friend_profile",name:"FriendProfile",component:dt,props:!0},{path:"/test",name:"Test",component:At},{path:"/timeline",name:"TimeLine",component:Qt},{path:"/sendmessage",name:"SendMessage",component:he,props:!0},{path:"/messagecontent",name:"MessageContent",component:nt},{path:"/showrequest",name:"ShowRequest",component:xe},{path:"/sending",name:"Sending",component:Re}],Fe=new h["a"]({mode:"history",base:"/sakura-front/",routes:Pe});Fe.beforeEach((function(t,e,a){t.matched.some((function(t){return!t.meta.isPublic}))&&$e.state.userToken?a({name:"Login",query:{redirect:t.fullPath}}):a()}));var Ee=Fe,Me=a("f309");r["a"].use(Me["a"]);var De=new Me["a"]({});r["a"].config.productionTip=!1,new r["a"]({router:Ee,store:$e,vuetify:De,render:function(t){return t(f)}}).$mount("#app")},"5ccf":function(t,e,a){},"62a3":function(t,e,a){},"6c70":function(t,e,a){"use strict";a("aaa2")},"889a":function(t,e,a){},"8f6e":function(t,e,a){},aaa2:function(t,e,a){},ac29:function(t,e,a){"use strict";a("8f6e")},ace9:function(t,e,a){t.exports=a.p+"img/house.3361108d.png"},ad07:function(t,e,a){t.exports=a.p+"img/road.f82ae948.png"},b89f:function(t,e,a){"use strict";a("62a3")},e46a:function(t,e,a){"use strict";a("889a")}});
//# sourceMappingURL=app.c8fe2ae3.js.map